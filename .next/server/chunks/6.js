"use strict";exports.id=6,exports.ids=[6],exports.modules={19006:(e,s,t)=>{t.d(s,{B:()=>O});var i=t(60687),a=t(85814),l=t.n(a),n=t(30474),r=t(43210),c=t(12941),d=t(32192),o=t(99270),h=t(1531),m=t(1303),x=t(67760),f=t(41312),u=t(58869),p=t(40083),j=t(98712),N=t(31158),g=t(24934),w=t(71463),v=t(68123),b=t(96241);let y=r.forwardRef(({className:e,children:s,...t},a)=>(0,i.jsxs)(v.bL,{ref:a,className:(0,b.cn)("relative overflow-hidden",e),...t,children:[(0,i.jsx)(v.LM,{className:"h-full w-full rounded-[inherit]",children:s}),(0,i.jsx)(z,{}),(0,i.jsx)(v.OK,{})]}));y.displayName=v.bL.displayName;let z=r.forwardRef(({className:e,orientation:s="vertical",...t},a)=>(0,i.jsx)(v.VM,{ref:a,orientation:s,className:(0,b.cn)("flex touch-none select-none transition-colors","vertical"===s&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===s&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...t,children:(0,i.jsx)(v.lr,{className:"relative flex-1 rounded-full bg-border"})}));z.displayName=v.VM.displayName;var k=t(26134),$=t(24224),A=t(11860);let C=k.bL,S=k.l9;k.bm;let L=k.ZL,R=r.forwardRef(({className:e,...s},t)=>(0,i.jsx)(k.hJ,{className:(0,b.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...s,ref:t}));R.displayName=k.hJ.displayName;let E=(0,$.F)("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),M=r.forwardRef(({side:e="right",className:s,children:t,...a},l)=>(0,i.jsxs)(L,{children:[(0,i.jsx)(R,{}),(0,i.jsxs)(k.UC,{ref:l,className:(0,b.cn)(E({side:e}),s),...a,children:[t,(0,i.jsxs)(k.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[(0,i.jsx)(A.A,{className:"h-4 w-4"}),(0,i.jsx)("span",{className:"sr-only",children:"Close"})]})]})]}));M.displayName=k.UC.displayName,r.forwardRef(({className:e,...s},t)=>(0,i.jsx)(k.hE,{ref:t,className:(0,b.cn)("text-lg font-semibold text-foreground",e),...s})).displayName=k.hE.displayName,r.forwardRef(({className:e,...s},t)=>(0,i.jsx)(k.VY,{ref:t,className:(0,b.cn)("text-sm text-muted-foreground",e),...s})).displayName=k.VY.displayName;var U=t(73188),I=t(60217),F=t(61037);function V(e,s){return e.length<=s?e:e.slice(0,s)+"..."}function O(){let{user:e,signOut:s,isLoading:t,followedArtistIds:a}=(0,U.A)(),v=(0,F.a)(),[b,z]=(0,r.useState)(240),k=(0,r.useRef)(!1),[$,A]=(0,r.useState)(180),[L,R]=(0,r.useState)(!1),[E,O]=(0,r.useState)([]),[P,Y]=(0,r.useState)(!1),D=(0,r.useRef)(null),[H,J]=(0,r.useState)(0);(0,r.useRef)(0);let T=(0,r.useRef)([]),W=e=>({min:80,max:234,def:e<640?180:234}),X=(e,s)=>{let{min:t,max:i}=W(s);return Math.min(Math.max(e,t),i)},B=()=>{D.current&&(clearTimeout(D.current),D.current=null)},K=e=>{!e&&H<20?(B(),D.current=setTimeout(()=>{J(e=>e+1),Z()},Math.min(15e3,2e3*Math.pow(1.4,H)))):e&&(J(0),B())},Z=async()=>{if(!e||0===a.length){O([]),T.current=[];return}try{Y(!0);let e=(await Promise.all(a.map(async e=>{try{let s=await I.i.getArtist(e),t=s.images?.reduce((e,s)=>{let t=Math.abs(s.width-48),i=e?Math.abs(e.width-48):1/0;return t<i?s:e})||s.images?.[0];return{id:e,name:s.name,image:t?.url,popularity:s.popularity}}catch(s){return console.warn(`Could not fetch artist ${e}`),{id:e,name:"Unknown Artist",image:void 0,popularity:0}}}))).filter(e=>"Unknown Artist"!==e.name);O(e),T.current=e;let s=e.length>0;K(s)}catch(e){console.error("Error fetching followed artists:",e),console.log("API error - preserving existing data, not clearing sidebar"),K(!1)}finally{Y(!1)}},q=!v&&b<=$+34,G=q?"h-12 w-12":"h-5 w-5",Q=q?"gap-2":"gap-3",_=!v&&b<=$+79;return v?(0,i.jsxs)(C,{open:L,onOpenChange:R,children:[(0,i.jsx)(S,{asChild:!0,children:(0,i.jsx)(g.$,{variant:"ghost",size:"icon",className:"fixed top-4 left-4 z-50 lg:hidden bg-zinc-900/80 backdrop-blur-sm border border-zinc-800",children:(0,i.jsx)(c.A,{className:"h-5 w-5"})})}),(0,i.jsx)(M,{side:"left",className:"w-80 p-0 bg-zinc-900 border-r border-zinc-800",children:(0,i.jsxs)("div",{className:"flex h-full flex-col",children:[(0,i.jsxs)("div",{className:"p-6 flex-shrink-0",children:[(0,i.jsx)("div",{className:"mb-8",children:(0,i.jsxs)(l(),{href:"/",className:"flex items-center gap-3 font-bold text-xl",onClick:()=>R(!1),children:[(0,i.jsx)("span",{className:"h-8 w-8 rounded-full bg-white text-black flex items-center justify-center",children:"♪"}),(0,i.jsx)("span",{children:"Music Stream"})]})}),(0,i.jsxs)("nav",{className:"space-y-6",children:[(0,i.jsxs)("div",{className:"space-y-3",children:[(0,i.jsxs)(l(),{href:"/",className:"flex items-center gap-3 text-zinc-200 hover:text-white transition-colors p-2 rounded-lg hover:bg-white/5",onClick:()=>R(!1),children:[(0,i.jsx)(d.A,{className:"h-5 w-5"}),(0,i.jsx)("span",{children:"Home"})]}),(0,i.jsxs)(l(),{href:"/search",className:"flex items-center gap-3 text-zinc-400 hover:text-white transition-colors p-2 rounded-lg hover:bg-white/5",onClick:()=>R(!1),children:[(0,i.jsx)(o.A,{className:"h-5 w-5"}),(0,i.jsx)("span",{children:"Search"})]}),(0,i.jsxs)(l(),{href:"/library",className:"flex items-center gap-3 text-zinc-400 hover:text-white transition-colors p-2 rounded-lg hover:bg-white/5",onClick:()=>R(!1),children:[(0,i.jsx)(h.A,{className:"h-5 w-5"}),(0,i.jsx)("span",{children:"Your Library"})]})]}),(0,i.jsxs)("div",{className:"space-y-3",children:[(0,i.jsxs)(l(),{href:e?"/create-playlist":"/sign-in",className:"flex items-center gap-3 text-zinc-400 hover:text-white transition-colors p-2 rounded-lg hover:bg-white/5",onClick:()=>R(!1),children:[(0,i.jsx)(m.A,{className:"h-5 w-5"}),(0,i.jsx)("span",{children:"Create Playlist"})]}),(0,i.jsxs)(l(),{href:e?"/liked-songs":"/sign-in",className:"flex items-center gap-3 text-zinc-400 hover:text-white transition-colors p-2 rounded-lg hover:bg-white/5",onClick:()=>R(!1),children:[(0,i.jsx)(x.A,{className:"h-5 w-5"}),(0,i.jsx)("span",{children:"Liked Songs"})]})]})]})]}),(0,i.jsx)("div",{className:"h-px bg-zinc-800 mb-4"}),(0,i.jsx)(y,{className:"flex-1 px-6 border-b border-zinc-800 pb-4",children:(0,i.jsx)("div",{className:"space-y-2 pb-6",children:e?P?(0,i.jsx)("div",{className:"space-y-2",children:Array.from({length:6}).map((e,s)=>(0,i.jsxs)("div",{className:"flex items-center gap-3 py-2",children:[(0,i.jsx)(w.E,{className:"h-10 w-10 rounded-full"}),(0,i.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,i.jsx)(w.E,{className:"h-4 w-32 mb-2"}),(0,i.jsx)(w.E,{className:"h-3 w-24"})]})]},s))}):0===E.length?(0,i.jsx)("div",{className:"py-2 text-sm text-zinc-500",children:"No followed artists yet"}):E.map(e=>(0,i.jsxs)(l(),{href:`/artist/${e.id}`,className:"flex items-center gap-3 py-2 text-sm text-zinc-400 hover:text-white transition-colors p-2 rounded-lg hover:bg-white/5",onClick:()=>R(!1),children:[e.image?(0,i.jsx)(n.default,{src:e.image,alt:e.name,width:40,height:40,className:"rounded-full flex-shrink-0 object-cover w-10 h-10"}):(0,i.jsx)("div",{className:"h-10 w-10 rounded-full bg-zinc-700 flex items-center justify-center flex-shrink-0",children:(0,i.jsx)(f.A,{className:"h-5 w-5"})}),(0,i.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,i.jsx)("div",{className:"whitespace-normal leading-tight truncate font-semibold text-white",children:V(e.name,13)}),(0,i.jsx)("div",{className:"text-xs text-white truncate font-medium",children:"Artist"})]})]},e.id)):(0,i.jsx)("div",{className:"py-2 text-sm text-zinc-500",children:"Sign in to view your followed artists"})})}),(0,i.jsxs)("div",{className:"mt-auto p-6 space-y-3",children:[e?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,i.jsx)(l(),{href:"/profile",className:"flex-shrink-0",onClick:()=>R(!1),children:e.photoURL?(0,i.jsx)(n.default,{src:e.photoURL,alt:e.displayName||"User",width:32,height:32,className:"rounded-full hover:ring-2 hover:ring-zinc-600 transition-all cursor-pointer"}):(0,i.jsx)("div",{className:"h-8 w-8 rounded-full bg-zinc-700 flex items-center justify-center hover:bg-zinc-600 transition-colors cursor-pointer",children:(0,i.jsx)(u.A,{className:"h-4 w-4"})})}),(0,i.jsx)("div",{className:"overflow-hidden",children:(0,i.jsx)(l(),{href:"/profile",className:"font-medium text-sm hover:underline truncate block",children:e.displayName})})]}),(0,i.jsxs)(g.$,{variant:"outline",size:"sm",className:"w-full gap-3 text-zinc-400 hover:text-white border-zinc-700",onClick:s,children:[(0,i.jsx)(p.A,{className:"h-5 w-5"}),(0,i.jsx)("span",{children:"Sign Out"})]})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(g.$,{variant:"outline",size:"sm",className:"w-full gap-3 text-zinc-400 hover:text-white border-zinc-700",asChild:!0,children:(0,i.jsxs)(l(),{href:"/sign-in",onClick:()=>R(!1),children:[(0,i.jsx)(j.A,{className:"h-5 w-5"}),(0,i.jsx)("span",{children:"Sign In"})]})}),(0,i.jsx)(g.$,{variant:"outline",size:"sm",className:"w-full gap-3 text-zinc-400 hover:text-white border-zinc-700",asChild:!0,children:(0,i.jsxs)(l(),{href:"/sign-up",onClick:()=>R(!1),children:[(0,i.jsx)(u.A,{className:"h-5 w-5"}),(0,i.jsx)("span",{children:"Sign Up"})]})})]}),(0,i.jsxs)(g.$,{variant:"outline",size:"sm",className:"w-full gap-3 text-zinc-400 hover:text-white border-zinc-700",children:[(0,i.jsx)(N.A,{className:"h-5 w-5"}),(0,i.jsx)("span",{children:"Install App"})]})]})]})})]}):(0,i.jsx)("div",{className:"hidden lg:flex h-[calc(100vh-5rem)] flex-col bg-zinc-900 border-r border-zinc-800 overflow-hidden relative",style:{width:b},children:(0,i.jsxs)("div",{className:"flex-1 flex flex-col min-h-0",children:[(0,i.jsxs)("div",{className:"p-6 flex-shrink-0",children:[(0,i.jsxs)(l(),{href:"/",className:`flex items-center ${Q} font-bold text-xl mb-8 min-w-0`,children:[(0,i.jsx)("span",{className:`${q?"h-9 w-9":"h-8 w-8"} rounded-full bg-white text-black flex items-center justify-center flex-shrink-0`,children:"♪"}),(0,i.jsx)("span",{className:`min-w-0 whitespace-normal leading-tight ${q?"hidden":"block"}`,children:_?"MS":"Music Stream"})]}),(0,i.jsxs)("nav",{className:"space-y-6",children:[(0,i.jsxs)("div",{className:"space-y-3",children:[(0,i.jsxs)(l(),{href:"/",className:`flex items-center ${Q} text-zinc-200 hover:text-white transition-colors`,children:[(0,i.jsx)(d.A,{className:G}),(0,i.jsx)("span",{className:`${q?"hidden":"block"}`,children:"Home"})]}),(0,i.jsxs)(l(),{href:"/search",className:`flex items-center ${Q} text-zinc-400 hover:text-white transition-colors`,children:[(0,i.jsx)(o.A,{className:G}),(0,i.jsx)("span",{className:`${q?"hidden":"block"}`,children:"Search"})]}),(0,i.jsxs)(l(),{href:"/library",className:`flex items-center ${Q} text-zinc-400 hover:text-white transition-colors`,children:[(0,i.jsx)(h.A,{className:G}),(0,i.jsx)("span",{className:`${q?"hidden":"block"}`,children:"Your Library"})]})]}),(0,i.jsxs)("div",{className:"space-y-3",children:[(0,i.jsxs)(l(),{href:e?"/create-playlist":"/sign-in",className:`flex items-center ${Q} text-zinc-400 hover:text-white transition-colors`,children:[(0,i.jsx)(m.A,{className:G}),(0,i.jsx)("span",{className:`${q?"hidden":"block"}`,children:"Create Playlist"})]}),(0,i.jsxs)(l(),{href:e?"/liked-songs":"/sign-in",className:`flex items-center ${Q} text-zinc-400 hover:text-white transition-colors`,children:[(0,i.jsx)(x.A,{className:G}),(0,i.jsx)("span",{className:`${q?"hidden":"block"}`,children:"Liked Songs"})]})]})]})]}),(0,i.jsx)("div",{className:"h-px bg-zinc-800 mb-4"}),(0,i.jsx)(y,{className:`flex-1 border-b border-zinc-800 pb-4 ${q?"px-2":"px-6"}`,children:(0,i.jsx)("div",{className:"space-y-2 pb-6",children:e?P?(0,i.jsx)("div",{className:`${q?"hidden":"block"}`,children:Array.from({length:8}).map((e,s)=>(0,i.jsxs)("div",{className:`flex items-center ${Q} py-1.5`,children:[(0,i.jsx)(w.E,{className:"h-8 w-8 rounded-full"}),(0,i.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,i.jsx)(w.E,{className:"h-3 w-24 mb-1"}),(0,i.jsx)(w.E,{className:"h-2.5 w-16"})]})]},s))}):0===E.length?(0,i.jsx)("div",{className:`py-2 text-sm text-zinc-500 ${q?"hidden":"block"}`,children:"No followed artists yet"}):E.map(e=>(0,i.jsxs)(l(),{href:`/artist/${e.id}`,className:`flex items-center ${q?"justify-center":""} ${Q} py-1.5 text-sm text-zinc-400 hover:text-white transition-colors`,children:[e.image?(0,i.jsx)(n.default,{src:e.image,alt:e.name,width:48,height:48,className:"rounded-full flex-shrink-0 object-cover w-12 h-12"}):(0,i.jsx)("div",{className:"h-12 w-12 rounded-full bg-zinc-700 flex items-center justify-center flex-shrink-0",children:(0,i.jsx)(f.A,{className:"h-6 w-6"})}),(0,i.jsxs)("div",{className:`min-w-0 flex-1 ${q?"hidden":"block"}`,children:[(0,i.jsx)("div",{className:"whitespace-normal leading-tight truncate font-semibold text-white",children:V(e.name,13)}),(0,i.jsx)("div",{className:"text-xs  text-zinc-500 truncate font-medium",children:"Artist"})]})]},e.id)):(0,i.jsx)("div",{className:`py-2 text-sm text-zinc-500 ${q?"hidden":"block"}`,children:"Sign in to view your followed artists"})})}),(0,i.jsxs)("div",{className:"mt-auto p-6 space-y-3",children:[e?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:`flex items-center ${Q} mb-3`,children:[(0,i.jsx)(l(),{href:"/profile",className:"flex-shrink-0",children:e.photoURL?(0,i.jsx)(n.default,{src:e.photoURL,alt:e.displayName||"User",width:32,height:32,className:"rounded-full hover:ring-2 hover:ring-zinc-600 transition-all cursor-pointer"}):(0,i.jsx)("div",{className:"h-8 w-8 rounded-full bg-zinc-700 flex items-center justify-center hover:bg-zinc-700 transition-colors cursor-pointer",children:(0,i.jsx)(u.A,{className:q?"h-5 w-5":"h-4 w-4"})})}),(0,i.jsx)("div",{className:`overflow-hidden ${q?"hidden":"block"}`,children:(0,i.jsx)(l(),{href:"/profile",className:"font-medium text-sm hover:underline truncate block",children:e.displayName})})]}),(0,i.jsxs)(g.$,{variant:"outline",size:"sm",className:`w-full ${Q} text-zinc-400 hover:text-white border-zinc-700`,onClick:s,children:[(0,i.jsx)(p.A,{className:q?"h-5 w-5":"h-4 w-4"}),(0,i.jsx)("span",{className:`${_?"hidden":"inline"}`,children:"Sign Out"})]})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(g.$,{variant:"outline",size:"sm",className:`w-full ${Q} text-zinc-400 hover:text-white border-zinc-700`,asChild:!0,children:(0,i.jsxs)(l(),{href:"/sign-in",children:[(0,i.jsx)(j.A,{className:_?"h-5 w-5":"h-4 w-4"}),(0,i.jsx)("span",{className:`${_?"hidden":"inline"}`,children:"Sign In"})]})}),(0,i.jsx)(g.$,{variant:"outline",size:"sm",className:`w-full ${Q} text-zinc-400 hover:text-white border-zinc-700`,asChild:!0,children:(0,i.jsxs)(l(),{href:"/sign-up",children:[(0,i.jsx)(u.A,{className:_?"h-5 w-5":"h-4 w-4"}),(0,i.jsx)("span",{className:`${_?"hidden":"inline"}`,children:"Sign Up"})]})})]}),(0,i.jsxs)(g.$,{variant:"outline",size:"sm",className:`w-full ${Q} text-zinc-400 hover:text-white border-zinc-700`,children:[(0,i.jsx)(N.A,{className:_?"h-5 w-5":"h-4 w-4"}),(0,i.jsx)("span",{className:`${_?"hidden":"inline"}`,children:"Install App"})]})]}),(0,i.jsx)("div",{onMouseDown:e=>{if(v)return;e.preventDefault(),k.current=!0;let s=e.clientX,t=window.innerWidth,i=e=>{k.current&&z(X(b+(e.clientX-s),t))},a=()=>{k.current=!1;try{window.localStorage.setItem("sidebarWidth",String(b))}catch{}document.removeEventListener("mousemove",i),document.removeEventListener("mouseup",a)};document.addEventListener("mousemove",i),document.addEventListener("mouseup",a)},className:"absolute right-0 top-0 h-full w-1.5 cursor-col-resize bg-transparent hover:bg-zinc-700/40 active:bg-zinc-700/60","aria-label":"Resize sidebar"})]})})}},71463:(e,s,t)=>{t.d(s,{E:()=>l});var i=t(60687),a=t(96241);function l({className:e,...s}){return(0,i.jsx)("div",{className:(0,a.cn)("animate-pulse rounded-md bg-muted",e),...s})}}};