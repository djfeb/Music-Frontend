(()=>{var e={};e.id=636,e.ids=[636],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},13964:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(62688).A)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},14985:e=>{"use strict";e.exports=require("dns")},17199:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"F:\\\\Music-Project\\\\group\\\\music-streaming_NOW_2\\\\app\\\\profile\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"F:\\Music-Project\\group\\music-streaming_NOW_2\\app\\profile\\page.tsx","default")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},19771:e=>{"use strict";e.exports=require("process")},21820:e=>{"use strict";e.exports=require("os")},25933:(e,t,s)=>{Promise.resolve().then(s.bind(s,61460))},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},34631:e=>{"use strict";e.exports=require("tls")},47033:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(62688).A)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},48730:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(62688).A)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},55511:e=>{"use strict";e.exports=require("crypto")},61460:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>C});var r=s(60687),i=s(43210),a=s(16189),n=s(30474),l=s(58869),c=s(62688);let o=(0,c.A)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),d=(0,c.A)("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);var x=s(47033);let u=(0,c.A)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var p=s(48730),h=s(85303),m=s(97840),f=s(67760),g=s(24934),j=s(19006),b=s(86497),y=s(93682),v=s(73188),N=s(75118);s(60217);var w=s(70333),k=s(75535),P=s(80043),z=s(13319),A=s(97380);function C(){let{user:e,isLoading:t,historyTrackIds:s,favoriteTrackIds:c,refreshHistory:C,deleteAccount:q,contentPreferences:_,updateContentPreferences:M}=(0,v.A)(),E=(0,N.F)(),S=(0,a.useRouter)(),{toast:F}=(0,w.dj)(),[L,$]=(0,i.useState)([]),[T,R]=(0,i.useState)(!1),[D,U]=(0,i.useState)(!1),[G,O]=(0,i.useState)(!1),[Y,H]=(0,i.useState)(!1),W=e?.photoURL?.includes("googleusercontent.com")||!1,I=async()=>{if(e){U(!0);try{let t=(0,k.rJ)(P.db,"users",e.uid,"history"),s=await (0,k.GG)(t),r=(0,k.wP)(P.db);s.docs.forEach(e=>{r.delete(e.ref)}),await r.commit(),await C(),$([]),F({title:"History cleared",description:"Your listening history has been successfully deleted."})}catch(e){console.error("Error clearing history:",e),F({title:"Error",description:"Failed to clear listening history. Please try again.",variant:"destructive"})}finally{U(!1)}}},K=async()=>{if(e&&window.confirm("Are you sure you want to delete your account? This action cannot be undone and will permanently delete:\n\n• Your profile and preferences\n• All playlists\n• Listening history\n• Favorite tracks\n• Followed artists\n• All personalization data\n\nType 'DELETE' to confirm:")){if("DELETE"!==window.prompt("Type 'DELETE' to confirm account deletion:")){F({title:"Account Deletion Cancelled",description:"Account deletion was cancelled."});return}O(!0);try{await q(),F({title:"Account Deleted",description:"Your account and all data have been permanently deleted."}),S.push("/")}catch(t){console.error("Error deleting account:",t);let e="Failed to delete account. Please try again.";t?.code==="auth/requires-recent-login"&&(e="For security reasons, please sign out and sign back in, then try deleting your account again."),F({title:"Error",description:e,variant:"destructive"})}finally{O(!1)}}},V=()=>{H(!0)},B=async e=>{try{await M({...e,hasSetPreferences:!0}),H(!1),F({title:"Preferences Updated",description:"Your music preferences have been updated successfully."})}catch(e){console.error("Error updating preferences:",e),F({title:"Error",description:"Failed to update preferences. Please try again.",variant:"destructive"})}};return t||!e?(0,r.jsx)("div",{className:"flex h-[calc(100vh-5rem)] items-center justify-center bg-black text-white",children:(0,r.jsx)("p",{children:"Loading..."})}):(0,r.jsxs)("div",{className:"flex h-[calc(100vh-5rem)] bg-black text-white overflow-hidden",children:[Y&&(0,r.jsx)(y.H,{onPreferencesSet:B,onSkip:()=>{H(!1)},existingPreferences:_}),(0,r.jsx)(j.B,{}),(0,r.jsx)("main",{className:"flex-1 overflow-auto",children:(0,r.jsx)("div",{className:"bg-gradient-to-b from-purple-900 to-black",children:(0,r.jsxs)("div",{className:"p-6 md:p-8 relative",children:[(0,r.jsxs)("div",{className:"flex flex-col md:flex-row items-center md:items-end gap-6 pt-16 md:pt-0",children:[e.photoURL?(0,r.jsx)(n.default,{src:e.photoURL,alt:e.displayName||"User",width:192,height:192,className:"rounded-full"}):(0,r.jsx)("div",{className:"h-48 w-48 rounded-full bg-zinc-800 flex items-center justify-center",children:(0,r.jsx)(l.A,{className:"h-24 w-24 text-zinc-500"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-xs uppercase font-medium",children:"Profile"}),(0,r.jsx)("h1",{className:"text-3xl md:text-5xl font-bold mt-2 mb-4",children:e.displayName}),(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 text-zinc-400",children:[(0,r.jsx)(o,{className:"h-4 w-4"}),(0,r.jsx)("span",{children:e.email})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2 text-zinc-400",children:[(0,r.jsx)(d,{className:"h-4 w-4"}),(0,r.jsxs)("span",{children:[L.length," unique tracks played"]})]})]})]})]}),(0,r.jsx)(g.$,{variant:"ghost",size:"icon",className:"hidden sm:flex mt-10 left-6 rounded-full h-10 w-10 bg-black/20 hover:bg-black/40 backdrop-blur-sm text-white border border-white/20 z-10",onClick:()=>window.history.back(),children:(0,r.jsx)(x.A,{className:"h-6 w-6"})}),(0,r.jsxs)("div",{className:"mt-8 space-y-6",children:[(0,r.jsxs)("section",{children:[(0,r.jsxs)("h2",{className:"text-2xl font-bold mb-4 flex items-center gap-2",children:[(0,r.jsx)(u,{className:"h-5 w-5 text-green-500"}),"Music Preferences"]}),(0,r.jsx)("div",{className:"bg-zinc-900/50 rounded-xl p-6",children:_?.hasSetPreferences&&_.preferredContinents?(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"font-semibold text-lg mb-2",children:"Preference Type"}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:["international"===_.preferenceType&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),(0,r.jsx)("span",{children:"International Music"})]}),"local"===_.preferenceType&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"w-3 h-3 bg-orange-500 rounded-full"}),(0,r.jsx)("span",{children:"Local & African Music"})]}),"mixed"===_.preferenceType&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),(0,r.jsx)("span",{children:"Mixed (International & Local)"})]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"font-semibold text-lg mb-2",children:"Preferred Regions"}),(0,r.jsxs)("div",{className:"flex flex-wrap gap-2",children:[_.preferredContinents?.slice(0,8).map(e=>r.jsx("span",{className:"px-3 py-1 bg-zinc-800 rounded-full text-sm text-zinc-300",children:e},e)),(_.preferredContinents?.length||0)>8&&(0,r.jsxs)("span",{className:"px-3 py-1 bg-zinc-700 rounded-full text-sm text-zinc-400",children:["+",(_.preferredContinents?.length||0)-8," more"]})]})]})]}):_?.hasSetPreferences?(0,r.jsxs)("div",{className:"text-center py-8",children:[(0,r.jsx)(u,{className:"h-12 w-12 text-zinc-600 mx-auto mb-4"}),(0,r.jsx)("h3",{className:"font-semibold text-lg mb-2",children:"Preferences Need Update"}),(0,r.jsx)("p",{className:"text-zinc-400 mb-4",children:"Your preferences need to be updated to the new continent-based system"}),(0,r.jsx)(g.$,{onClick:V,className:"bg-blue-500 hover:bg-blue-600 text-white",children:"Update Preferences"})]}):(0,r.jsxs)("div",{className:"text-center py-8",children:[(0,r.jsx)(u,{className:"h-12 w-12 text-zinc-600 mx-auto mb-4"}),(0,r.jsx)("h3",{className:"font-semibold text-lg mb-2",children:"No Preferences Set"}),(0,r.jsx)("p",{className:"text-zinc-400 mb-4",children:"Set your music preferences to get personalized recommendations"}),(0,r.jsx)(g.$,{onClick:V,className:"bg-green-500 hover:bg-green-600 text-black",children:"Set Preferences"})]})})]}),(0,r.jsxs)("section",{children:[(0,r.jsxs)("h2",{className:"text-2xl font-bold mb-4 flex items-center gap-2",children:[(0,r.jsx)(d,{className:"h-5 w-5 text-blue-500"}),"Recently Played"]}),T?(0,r.jsx)("div",{className:"bg-zinc-900/50 rounded-xl p-8 text-center",children:(0,r.jsx)("p",{className:"text-zinc-400",children:"Loading your listening history..."})}):L.length>0?(0,r.jsx)("div",{className:"bg-zinc-900/50 rounded-xl p-4 max-h-[600px] overflow-y-auto",children:(0,r.jsxs)("table",{className:"w-full",children:[(0,r.jsx)("thead",{className:"sticky top-0 bg-zinc-900/90 backdrop-blur-sm",children:(0,r.jsxs)("tr",{className:"text-zinc-400 text-left border-b border-zinc-800 text-sm",children:[(0,r.jsx)("th",{className:"pb-3 pl-4",children:"#"}),(0,r.jsx)("th",{className:"pb-3",children:"Title"}),(0,r.jsx)("th",{className:"pb-3 hidden md:table-cell",children:"Album"}),(0,r.jsx)("th",{className:"pb-3 text-right pr-4",children:(0,r.jsx)(p.A,{className:"h-4 w-4 inline"})})]})}),(0,r.jsx)("tbody",{children:L.map((e,t)=>{let s=E.current?.id===e.id,i=e.track;return(0,r.jsxs)("tr",{className:"group hover:bg-zinc-800/50 text-sm cursor-pointer",onClick:()=>{if(i){let t=L.filter(e=>e.track).map(e=>e.track);E.play(e.track,{queue:t,autoplay:!0})}},children:[(0,r.jsx)("td",{className:"py-3 pl-4",children:(0,r.jsx)("span",{className:`${s?"text-green-500":"text-zinc-400"}`,children:t+1})}),(0,r.jsx)("td",{className:"py-3",children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsxs)("div",{className:"relative w-10 h-10 bg-zinc-700 rounded flex items-center justify-center overflow-hidden group/image",children:[e.image?(0,r.jsx)(n.default,{src:e.image,alt:e.name,width:40,height:40,className:"object-cover w-full h-full",unoptimized:!0}):(0,r.jsx)(h.A,{className:"h-5 w-5 text-zinc-400"}),i&&(0,r.jsx)("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover/image:opacity-100 transition-opacity flex items-center justify-center",children:(0,r.jsx)(g.$,{size:"icon",variant:"secondary",className:"h-6 w-6 rounded-full",onClick:t=>{t.stopPropagation();let s=L.filter(e=>e.track).map(e=>e.track);E.play(e.track,{queue:s,autoplay:!0})},children:(0,r.jsx)(m.A,{className:"h-3 w-3 text-black"})})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:`font-medium ${s?"text-green-500":"text-white"}`,children:e.name}),(0,r.jsx)(z.d,{artists:[e.artist],artistIds:e.track?.artist_ids,maxLength:20,className:"text-zinc-400 text-xs",showLinks:!0,onClick:e=>{e.stopPropagation()}})]})]})}),(0,r.jsx)("td",{className:"py-3 hidden md:table-cell text-zinc-400",children:e.album}),(0,r.jsx)("td",{className:"py-3 text-right pr-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-end gap-3",children:[i&&(0,r.jsx)(g.$,{variant:"ghost",size:"icon",className:"h-8 w-8 text-zinc-400 opacity-0 group-hover:opacity-100 hover:text-white",onClick:t=>{t.stopPropagation();let s=L.filter(e=>e.track).map(e=>e.track);E.play(e.track,{queue:s,autoplay:!0})},children:(0,r.jsx)(m.A,{className:"h-4 w-4"})}),(0,r.jsx)("span",{className:"text-zinc-400",children:e.duration})]})})]},`${e.id}-${t}`)})})]})}):(0,r.jsxs)("div",{className:"bg-zinc-900/50 rounded-xl p-8 text-center",children:[(0,r.jsx)(d,{className:"h-12 w-12 text-zinc-700 mx-auto mb-4"}),(0,r.jsx)("h3",{className:"text-xl font-medium mb-2",children:"No listening history yet"}),(0,r.jsx)("p",{className:"text-zinc-400 mb-4",children:"Start listening to music to see your recently played tracks here"}),(0,r.jsx)(g.$,{onClick:()=>S.push("/"),children:"Discover Music"})]})]}),(0,r.jsxs)("section",{className:"mt-8",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Support MusicStream"}),(0,r.jsx)("div",{className:"bg-zinc-900/50 rounded-xl p-6 space-y-4",children:(0,r.jsxs)("div",{className:"text-center space-y-4",children:[(0,r.jsx)("div",{className:"w-16 h-16 bg-gradient-to-r from-pink-500 to-red-500 rounded-full flex items-center justify-center mx-auto",children:(0,r.jsx)(f.A,{className:"h-8 w-8 text-white"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-white mb-2",children:"Help Keep MusicStream Free"}),(0,r.jsx)("p",{className:"text-zinc-400 text-sm mb-4",children:"Your support helps us maintain and improve the service for everyone. Consider making a donation to keep MusicStream ad-free and free for all users."})]}),(0,r.jsx)(A.v,{className:"w-full"})]})})]}),(0,r.jsxs)("section",{children:[(0,r.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Account Settings"}),(0,r.jsxs)("div",{className:"bg-zinc-900/50 rounded-xl p-6 space-y-4",children:[!W&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(g.$,{variant:"outline",className:"w-full justify-start",onClick:()=>{F({title:"Edit Profile",description:"Profile editing feature coming soon!"})},children:"Edit Profile"}),(0,r.jsx)(g.$,{variant:"outline",className:"w-full justify-start",onClick:()=>{F({title:"Change Password",description:"Password change feature coming soon!"})},children:"Change Password"}),(0,r.jsx)(g.$,{variant:"outline",className:"w-full justify-start",onClick:()=>{F({title:"Notification Settings",description:"Notification settings coming soon!"})},children:"Notification Settings"})]}),(0,r.jsxs)(g.$,{variant:"outline",className:"w-full justify-start text-blue-500 hover:text-blue-400 hover:bg-blue-950/20",onClick:V,children:[(0,r.jsx)(u,{className:"h-4 w-4 mr-2"}),"Music Preferences"]}),s.length>0&&(0,r.jsx)(g.$,{variant:"outline",className:"w-full justify-start text-orange-500 hover:text-orange-400 hover:bg-orange-950/20",onClick:I,disabled:D,children:D?"Clearing...":"Clear Listening History"}),(0,r.jsx)(g.$,{variant:"outline",className:"w-full justify-start text-red-500 hover:text-red-400 hover:bg-red-950/20",onClick:K,disabled:G,children:G?"Deleting Account...":"Delete Account"})]})]})]})]})})}),(0,r.jsx)(b.MusicPlayer,{})]})}},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},73496:e=>{"use strict";e.exports=require("http2")},74075:e=>{"use strict";e.exports=require("zlib")},78669:(e,t,s)=>{Promise.resolve().then(s.bind(s,17199))},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},91645:e=>{"use strict";e.exports=require("net")},94735:e=>{"use strict";e.exports=require("events")},97720:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>x,pages:()=>d,routeModule:()=>u,tree:()=>o});var r=s(65239),i=s(48088),a=s(88170),n=s.n(a),l=s(30893),c={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>l[e]);s.d(t,c);let o={children:["",{children:["profile",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,17199)),"F:\\Music-Project\\group\\music-streaming_NOW_2\\app\\profile\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,58014)),"F:\\Music-Project\\group\\music-streaming_NOW_2\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,65284,23)),"next/dist/client/components/unauthorized-error"]}]}.children,d=["F:\\Music-Project\\group\\music-streaming_NOW_2\\app\\profile\\page.tsx"],x={require:s,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:i.RouteKind.APP_PAGE,page:"/profile/page",pathname:"/profile",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[719,599,633,434,6,682],()=>s(97720));module.exports=r})();