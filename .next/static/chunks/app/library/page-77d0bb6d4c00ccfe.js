(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7382],{165:(e,t,a)=>{Promise.resolve().then(a.bind(a,2529))},227:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(9946).A)("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]])},2355:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(9946).A)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},2529:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>M});var s=a(5155),i=a(2115),l=a(8719),r=a(2355),n=a(4616),c=a(227),o=a(7461),d=a(7580),m=a(5690),h=a(4186),u=a(1976),x=a(5623),f=a(6516),g=a(1788);let p=(0,a(9946).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);var v=a(6766),y=a(6874),b=a.n(y),j=a(7168),N=a(6597),w=a(5970),k=a(9338),z=a(5683),A=a(2401),C=a(875),S=a(5586),_=a(7133);function M(){let e=(0,k.F)(),{user:t,favoriteTrackIds:a,addToFavorites:y,removeFromFavorites:M,followedArtistIds:P,unfollowArtist:T,likedAlbumIds:L,unlikeAlbum:E}=(0,z.A)(),[I,R]=(0,i.useState)("playlists"),[q,F]=(0,i.useState)([]),[U,D]=(0,i.useState)([]),[$,G]=(0,i.useState)([]),[V,B]=(0,i.useState)(!0),[H,Y]=(0,i.useState)(null),[Q,X]=(0,i.useState)({}),[Z,J]=(0,i.useState)(null);(0,i.useEffect)(()=>{t&&K()},[t,P,L]);let K=async()=>{if(t){B(!0);try{let e=await A.firebaseService.getUserPlaylists(t.uid);if(F(e),P.length>0){let e=P.map(e=>C.i.getArtist(e).catch(()=>null)),t=(await Promise.all(e)).filter(e=>null!==e);D(t)}else D([]);if(L.length>0){let e=L.map(e=>C.i.getAlbum(e).catch(()=>null)),t=(await Promise.all(e)).filter(e=>null!==e);G(t)}else G([])}catch(e){console.error("Error loading user content:",e)}finally{B(!1)}}},O=e=>{let t=Math.floor(e/6e4),a=Math.floor(e%6e4/1e3);return"".concat(t,":").concat(a.toString().padStart(2,"0"))},W=async e=>{if(!Q[e])try{let t=await A.firebaseService.getPlaylist(e);if(!t||0===t.tracks.length){X(t=>({...t,[e]:[]}));return}let a=t.tracks.map(e=>C.i.getTrack(e).catch(()=>null)),s=(await Promise.all(a)).filter(e=>null!==e);try{let t=await Promise.all(s.map(async e=>{try{let t=await C.i.getAlbum(e.album_id);return{...e,album_images:t.images||[]}}catch(t){return e}}));X(a=>({...a,[e]:t}))}catch(t){console.warn("Failed to fetch album images for playlist tracks:",t),X(t=>({...t,[e]:s}))}}catch(t){console.error("Error loading playlist tracks:",t),X(t=>({...t,[e]:[]}))}},ee=async e=>{H===e?Y(null):(Y(e),await W(e))},et=async(e,a)=>{try{await A.firebaseService.removeTrackFromPlaylist(e,a),await W(e);let s=await A.firebaseService.getUserPlaylists(t.uid);F(s)}catch(e){console.error("Error removing track from playlist:",e)}},ea=e=>{var t;let a="".concat(e.name," by ").concat((null===(t=e.artists)||void 0===t?void 0:t.join(", "))||"Unknown Artist");navigator.clipboard.writeText(a).then(()=>{console.log("Track info copied to clipboard:",a)}).catch(()=>{console.log("Failed to copy track info")})},es=e=>{var t;let a="/api/proxy/download/".concat(e.id),s=document.createElement("a");s.href=a,s.download="".concat(e.name," - ").concat((null===(t=e.artists)||void 0===t?void 0:t.join(", "))||"Unknown Artist",".mp3"),s.target="_blank",document.body.appendChild(s),s.click(),document.body.removeChild(s),console.log("Download started for track:",e.name)};return t?(0,s.jsxs)("div",{className:"flex h-[calc(100vh-5rem)] bg-black text-white overflow-hidden",children:[(0,s.jsx)(w.B,{}),(0,s.jsx)("main",{className:"flex-1 overflow-auto",children:(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)(j.$,{variant:"ghost",size:"icon",className:"hidden sm:flex rounded-full h-10 w-10",onClick:()=>window.history.back(),children:(0,s.jsx)(r.A,{className:"h-6 w-6"})}),(0,s.jsx)("h1",{className:"text-3xl font-bold",children:"Your Library"})]}),(0,s.jsx)(b(),{href:"/create-playlist",children:(0,s.jsxs)(j.$,{children:[(0,s.jsx)(n.A,{className:"h-4 w-4 mr-2"}),"Create Playlist"]})})]}),(0,s.jsxs)(N.tU,{value:I,onValueChange:R,className:"w-full",children:[(0,s.jsxs)(N.j7,{className:"grid w-full grid-cols-3 bg-zinc-900 border-zinc-800",children:[(0,s.jsxs)(N.Xi,{value:"playlists",className:"data-[state=active]:bg-zinc-800",children:[(0,s.jsx)(c.A,{className:"h-4 w-4 mr-2"}),"Playlists (",q.length,")"]}),(0,s.jsxs)(N.Xi,{value:"albums",className:"data-[state=active]:bg-zinc-800",children:[(0,s.jsx)(o.A,{className:"h-4 w-4 mr-2"}),"Albums (",$.length,")"]}),(0,s.jsxs)(N.Xi,{value:"artists",className:"data-[state=active]:bg-zinc-800",children:[(0,s.jsx)(d.A,{className:"h-4 w-4 mr-2"}),"Artists (",U.length,")"]})]}),(0,s.jsx)(N.av,{value:"playlists",className:"mt-6",children:V?(0,s.jsx)("div",{className:"text-center py-12",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-white mx-auto"})}):q.length>0?(0,s.jsx)("div",{className:"space-y-4",children:q.map(t=>{var i;return(0,s.jsxs)("div",{className:"bg-zinc-800/30 rounded-lg overflow-hidden",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4 p-4 hover:bg-zinc-800/60 transition-colors",children:[(0,s.jsx)("div",{className:"w-16 h-16 bg-zinc-700 rounded flex items-center justify-center overflow-hidden",children:t.coverImage?(0,s.jsx)(v.default,{src:t.coverImage,alt:t.name,width:64,height:64,className:"object-cover w-full h-full",style:{width:"auto",height:"auto"}}):(0,s.jsx)(c.A,{className:"h-8 w-8 text-zinc-400"})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("h3",{className:"font-semibold truncate",children:t.name}),(0,s.jsxs)("p",{className:"text-sm text-zinc-400 truncate",children:[(null===(i=t.tracks)||void 0===i?void 0:i.length)||0," tracks"]}),(0,s.jsx)("p",{className:"text-xs text-zinc-500 truncate",children:(0,S.wI)(t.updatedAt)})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(j.$,{variant:"ghost",size:"sm",onClick:()=>ee(t.id),className:"text-zinc-400 hover:text-white",children:H===t.id?"Hide Tracks":"Show Tracks"}),(0,s.jsx)(b(),{href:"/playlist/".concat(t.id),children:(0,s.jsx)(j.$,{variant:"ghost",size:"icon",className:"text-zinc-400 hover:text-white",children:(0,s.jsx)(m.A,{className:"h-4 w-4"})})})]})]}),H===t.id&&(0,s.jsx)("div",{className:"border-t border-zinc-700 bg-zinc-900/50",children:Q[t.id]?Q[t.id].length>0?(0,s.jsx)("div",{className:"p-4",children:(0,s.jsxs)("table",{className:"w-full",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"text-zinc-400 text-left border-b border-zinc-800 text-sm",children:[(0,s.jsx)("th",{className:"pb-3 pl-4 w-12",children:"#"}),(0,s.jsx)("th",{className:"pb-3",children:"Title"}),(0,s.jsx)("th",{className:"pb-3 hidden md:table-cell",children:"Album"}),(0,s.jsx)("th",{className:"pb-3 text-right pr-4",children:(0,s.jsx)(h.A,{className:"h-4 w-4 inline"})})]})}),(0,s.jsx)("tbody",{children:Q[t.id].map((i,l)=>{let r=a.includes(i.id);return(0,s.jsxs)("tr",{className:"group hover:bg-zinc-800/50 text-sm",children:[(0,s.jsx)("td",{className:"py-3 pl-4",children:l+1}),(0,s.jsx)("td",{className:"py-3",children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsxs)("div",{className:"relative w-10 h-10 bg-zinc-700 rounded flex items-center justify-center overflow-hidden group/image",children:[i.album_images&&i.album_images.length>0?(0,s.jsx)(v.default,{src:i.album_images[0].url,alt:i.name,width:40,height:40,className:"object-cover w-full h-full",style:{width:"auto",height:"auto"}}):(0,s.jsx)(c.A,{className:"h-5 w-5 text-zinc-400"}),(0,s.jsx)("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover/image:opacity-100 transition-opacity flex items-center justify-center",children:(0,s.jsx)(j.$,{size:"icon",variant:"secondary",className:"h-6 w-6 rounded-full",onClick:()=>e.play(i,{queue:Q[t.id],autoplay:!0}),children:(0,s.jsx)(m.A,{className:"h-3 w-3 text-black"})})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"font-medium",children:i.name}),(0,s.jsx)("div",{className:"text-zinc-400 text-xs",children:i.artists&&i.artists.length>0?i.artists.join(", "):"Track #".concat(i.track_number)})]})]})}),(0,s.jsxs)("td",{className:"py-3 hidden md:table-cell text-zinc-400",children:["Track #",i.track_number]}),(0,s.jsx)("td",{className:"py-3 text-right pr-4 text-zinc-400",children:(0,s.jsxs)("div",{className:"flex items-center justify-end gap-3",children:[(0,s.jsx)(j.$,{variant:"ghost",size:"icon",className:"h-8 w-8 text-zinc-400 opacity-0 group-hover:opacity-100 hover:text-white",onClick:()=>e.play(i,{queue:Q[t.id],autoplay:!0}),children:(0,s.jsx)(m.A,{className:"h-4 w-4"})}),(0,s.jsx)(j.$,{variant:"ghost",size:"icon",className:"h-8 w-8 ".concat(r?"text-red-500":"text-zinc-400"," opacity-0 group-hover:opacity-100 hover:text-red-400"),onClick:()=>{r?M(i.id):y(i.id)},children:(0,s.jsx)(u.A,{className:"h-4 w-4 ".concat(r?"fill-current":"")})}),(0,s.jsx)("span",{children:O(i.duration_ms)}),(0,s.jsxs)(_.rI,{children:[(0,s.jsx)(_.ty,{asChild:!0,children:(0,s.jsx)(j.$,{variant:"ghost",size:"icon",className:"h-8 w-8 text-zinc-400 opacity-0 group-hover:opacity-100 hover:text-white",children:(0,s.jsx)(x.A,{className:"h-4 w-4"})})}),(0,s.jsxs)(_.SQ,{className:"w-48 bg-zinc-800 border-zinc-700 text-white",children:[(0,s.jsxs)(_._2,{className:"flex items-center gap-2 cursor-pointer hover:bg-zinc-700",onClick:()=>ea(i),children:[(0,s.jsx)(f.A,{className:"h-4 w-4"}),"Share Track"]}),(0,s.jsxs)(_._2,{className:"flex items-center gap-2 cursor-pointer hover:bg-zinc-700",onClick:()=>es(i),children:[(0,s.jsx)(g.A,{className:"h-4 w-4"}),"Download"]}),(0,s.jsx)(_.mB,{className:"bg-zinc-700"}),(0,s.jsxs)(_._2,{className:"flex items-center gap-2 cursor-pointer hover:bg-zinc-700 text-red-400 hover:text-red-300",onClick:()=>et(t.id,i.id),children:[(0,s.jsx)(p,{className:"h-4 w-4"}),"Remove from Playlist"]})]})]})]})})]},i.id)})})]})}):(0,s.jsxs)("div",{className:"p-8 text-center text-zinc-400",children:[(0,s.jsx)(c.A,{className:"h-12 w-12 mx-auto mb-2 text-zinc-600"}),(0,s.jsx)("p",{children:"No tracks in this playlist"})]}):(0,s.jsxs)("div",{className:"p-8 text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-white mx-auto mb-2"}),(0,s.jsx)("p",{className:"text-zinc-400",children:"Loading tracks..."})]})})]},t.id)})}):(0,s.jsxs)("div",{className:"text-center py-12 text-zinc-400",children:[(0,s.jsx)(c.A,{className:"h-16 w-16 mx-auto mb-4 text-zinc-600"}),(0,s.jsx)("p",{className:"text-lg",children:"No playlists yet"}),(0,s.jsx)("p",{className:"text-sm",children:"Create your first playlist to get started"})]})}),(0,s.jsx)(N.av,{value:"albums",className:"mt-6",children:V?(0,s.jsx)("div",{className:"text-center py-12",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-white mx-auto"})}):$.length>0?(0,s.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-4",children:$.map(e=>(0,s.jsxs)("div",{className:"group bg-zinc-800/30 p-4 rounded-lg hover:bg-zinc-800/60 transition-all duration-200",children:[(0,s.jsxs)("div",{className:"relative mb-4",children:[(0,s.jsx)("div",{className:"aspect-square rounded-lg overflow-hidden bg-zinc-700",children:e.images&&e.images.length>0?(0,s.jsx)(v.default,{src:e.images[0].url,alt:e.name,width:200,height:200,className:"w-full h-full object-cover"}):(0,s.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,s.jsx)(o.A,{className:"h-12 w-12 text-zinc-400"})})}),(0,s.jsx)("div",{className:"absolute bottom-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity",children:(0,s.jsx)(b(),{href:"/album/".concat(e.id),children:(0,s.jsx)(j.$,{size:"icon",className:"rounded-full h-12 w-12 bg-green-500 hover:bg-green-400 text-black shadow-lg",children:(0,s.jsx)(m.A,{className:"h-5 w-5 ml-0.5"})})})})]}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)(b(),{href:"/album/".concat(e.id),children:(0,s.jsx)("h3",{className:"font-semibold text-white hover:underline truncate mb-1",children:e.name})}),(0,s.jsx)("p",{className:"text-sm text-zinc-400 mb-3",children:(0,S.Yq)(e.release_date,"year")}),(0,s.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,s.jsx)(j.$,{variant:"outline",size:"sm",className:"text-xs border-zinc-600 text-zinc-300 hover:bg-zinc-700",onClick:()=>E(e.id),children:"Liked"}),(0,s.jsxs)(_.rI,{children:[(0,s.jsx)(_.ty,{asChild:!0,children:(0,s.jsx)(j.$,{variant:"ghost",size:"icon",className:"h-8 w-8 text-zinc-400 hover:text-white",children:(0,s.jsx)(x.A,{className:"h-4 w-4"})})}),(0,s.jsxs)(_.SQ,{className:"w-48 bg-zinc-800 border-zinc-700 text-white",children:[(0,s.jsx)(_._2,{asChild:!0,children:(0,s.jsxs)(b(),{href:"/album/".concat(e.id),className:"flex items-center gap-2 cursor-pointer hover:bg-zinc-700",children:[(0,s.jsx)(m.A,{className:"h-4 w-4"}),"Go to Album"]})}),(0,s.jsx)(_.mB,{className:"bg-zinc-700"}),(0,s.jsxs)(_._2,{className:"flex items-center gap-2 cursor-pointer hover:bg-zinc-700 text-red-400 hover:text-red-300",onClick:()=>E(e.id),children:[(0,s.jsx)(u.A,{className:"h-4 w-4"}),"Remove from Library"]})]})]})]})]})]},e.id))}):(0,s.jsxs)("div",{className:"text-center py-12 text-zinc-400",children:[(0,s.jsx)(o.A,{className:"h-16 w-16 mx-auto mb-4 text-zinc-600"}),(0,s.jsx)("p",{className:"text-lg",children:"No albums saved"}),(0,s.jsx)("p",{className:"text-sm",children:"Save albums to your library to see them here"})]})}),(0,s.jsx)(N.av,{value:"artists",className:"mt-6",children:V?(0,s.jsx)("div",{className:"text-center py-12",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-white mx-auto"})}):U.length>0?(0,s.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-4",children:U.map(e=>(0,s.jsxs)("div",{className:"group bg-zinc-800/30 p-4 rounded-lg hover:bg-zinc-800/60 transition-all duration-200",children:[(0,s.jsxs)("div",{className:"relative mb-4",children:[(0,s.jsx)("div",{className:"aspect-square rounded-full overflow-hidden bg-zinc-700",children:e.images&&e.images.length>0?(0,s.jsx)(v.default,{src:e.images[0].url,alt:e.name,width:200,height:200,className:"w-full h-full object-cover"}):(0,s.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,s.jsx)(d.A,{className:"h-12 w-12 text-zinc-400"})})}),(0,s.jsx)("div",{className:"absolute bottom-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity",children:(0,s.jsx)(b(),{href:"/artist/".concat(e.id),children:(0,s.jsx)(j.$,{size:"icon",className:"rounded-full h-12 w-12 bg-green-500 hover:bg-green-400 text-black shadow-lg",children:(0,s.jsx)(m.A,{className:"h-5 w-5 ml-0.5"})})})})]}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)(b(),{href:"/artist/".concat(e.id),children:(0,s.jsx)("h3",{className:"font-semibold text-white hover:underline truncate mb-1",children:e.name})}),(0,s.jsx)("p",{className:"text-sm text-zinc-400 mb-3",children:"Artist"}),(0,s.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,s.jsx)(j.$,{variant:"outline",size:"sm",className:"text-xs border-zinc-600 text-zinc-300 hover:bg-zinc-700",onClick:()=>T(e.id),children:"Following"}),(0,s.jsxs)(_.rI,{children:[(0,s.jsx)(_.ty,{asChild:!0,children:(0,s.jsx)(j.$,{variant:"ghost",size:"icon",className:"h-8 w-8 text-zinc-400 hover:text-white",children:(0,s.jsx)(x.A,{className:"h-4 w-4"})})}),(0,s.jsxs)(_.SQ,{className:"w-48 bg-zinc-800 border-zinc-700 text-white",children:[(0,s.jsx)(_._2,{asChild:!0,children:(0,s.jsxs)(b(),{href:"/artist/".concat(e.id),className:"flex items-center gap-2 cursor-pointer hover:bg-zinc-700",children:[(0,s.jsx)(m.A,{className:"h-4 w-4"}),"Go to Artist"]})}),(0,s.jsx)(_.mB,{className:"bg-zinc-700"}),(0,s.jsxs)(_._2,{className:"flex items-center gap-2 cursor-pointer hover:bg-zinc-700 text-red-400 hover:text-red-300",onClick:()=>T(e.id),children:[(0,s.jsx)(u.A,{className:"h-4 w-4"}),"Unfollow"]})]})]})]})]})]},e.id))}):(0,s.jsxs)("div",{className:"text-center py-12 text-zinc-400",children:[(0,s.jsx)(d.A,{className:"h-16 w-16 mx-auto mb-4 text-zinc-600"}),(0,s.jsx)("p",{className:"text-lg",children:"No artists followed"}),(0,s.jsx)("p",{className:"text-sm",children:"Follow artists to see them in your library"})]})})]})]})})]}):(0,s.jsxs)("div",{className:"flex h-[calc(100vh-5rem)] bg-black text-white overflow-hidden",children:[(0,s.jsx)(w.B,{}),(0,s.jsx)("main",{className:"flex-1 overflow-auto",children:(0,s.jsxs)("div",{className:"p-6 text-center",children:[(0,s.jsx)(l.A,{className:"h-16 w-16 mx-auto mb-4 text-zinc-600"}),(0,s.jsx)("h1",{className:"text-2xl font-bold mb-2",children:"Your Library"}),(0,s.jsx)("p",{className:"text-zinc-400 mb-4",children:"Sign in to view your saved music"}),(0,s.jsx)(b(),{href:"/sign-in",children:(0,s.jsx)(j.$,{children:"Sign In"})})]})})]})}},4186:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(9946).A)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},4616:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(9946).A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},5586:(e,t,a)=>{"use strict";function s(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"medium";if(!e)return"Unknown date";let a="string"==typeof e?new Date(e):e;if(isNaN(a.getTime()))return"Invalid date";switch(t){case"year":return a.getFullYear().toString();case"short":return a.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"});case"medium":return a.toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"});case"long":return a.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"});default:return a.toLocaleDateString("en-US")}}function i(e){if(!e)return"Unknown time";let t="string"==typeof e?new Date(e):e;if(isNaN(t.getTime()))return"Invalid date";let a=Math.ceil(Math.abs(new Date().getTime()-t.getTime())/864e5);return 0===a?"Today":1===a?"1 day ago":a<7?"".concat(a," days ago"):a<30?"".concat(Math.ceil(a/7)," weeks ago"):a<365?"".concat(Math.ceil(a/30)," months ago"):"".concat(Math.ceil(a/365)," years ago")}function l(e,t,a){let i=[s(e,"year")];return t&&i.push(t.charAt(0).toUpperCase()+t.slice(1)),a&&i.push("".concat(a," tracks")),i.join(" â€¢ ")}a.d(t,{Yq:()=>s,wI:()=>i,x_:()=>l})},5623:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(9946).A)("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]])},6516:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(9946).A)("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]])},6597:(e,t,a)=>{"use strict";a.d(t,{tU:()=>_,av:()=>T,j7:()=>M,Xi:()=>P});var s=a(5155),i=a(2115),l=a(5185),r=a(6081),n=a(9196),c=a(8905),o=a(3655),d=a(4315),m=a(5845),h=a(1285),u="Tabs",[x,f]=(0,r.A)(u,[n.RG]),g=(0,n.RG)(),[p,v]=x(u),y=i.forwardRef((e,t)=>{let{__scopeTabs:a,value:i,onValueChange:l,defaultValue:r,orientation:n="horizontal",dir:c,activationMode:u="automatic",...x}=e,f=(0,d.jH)(c),[g,v]=(0,m.i)({prop:i,onChange:l,defaultProp:r});return(0,s.jsx)(p,{scope:a,baseId:(0,h.B)(),value:g,onValueChange:v,orientation:n,dir:f,activationMode:u,children:(0,s.jsx)(o.sG.div,{dir:f,"data-orientation":n,...x,ref:t})})});y.displayName=u;var b="TabsList",j=i.forwardRef((e,t)=>{let{__scopeTabs:a,loop:i=!0,...l}=e,r=v(b,a),c=g(a);return(0,s.jsx)(n.bL,{asChild:!0,...c,orientation:r.orientation,dir:r.dir,loop:i,children:(0,s.jsx)(o.sG.div,{role:"tablist","aria-orientation":r.orientation,...l,ref:t})})});j.displayName=b;var N="TabsTrigger",w=i.forwardRef((e,t)=>{let{__scopeTabs:a,value:i,disabled:r=!1,...c}=e,d=v(N,a),m=g(a),h=A(d.baseId,i),u=C(d.baseId,i),x=i===d.value;return(0,s.jsx)(n.q7,{asChild:!0,...m,focusable:!r,active:x,children:(0,s.jsx)(o.sG.button,{type:"button",role:"tab","aria-selected":x,"aria-controls":u,"data-state":x?"active":"inactive","data-disabled":r?"":void 0,disabled:r,id:h,...c,ref:t,onMouseDown:(0,l.m)(e.onMouseDown,e=>{r||0!==e.button||!1!==e.ctrlKey?e.preventDefault():d.onValueChange(i)}),onKeyDown:(0,l.m)(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&d.onValueChange(i)}),onFocus:(0,l.m)(e.onFocus,()=>{let e="manual"!==d.activationMode;x||r||!e||d.onValueChange(i)})})})});w.displayName=N;var k="TabsContent",z=i.forwardRef((e,t)=>{let{__scopeTabs:a,value:l,forceMount:r,children:n,...d}=e,m=v(k,a),h=A(m.baseId,l),u=C(m.baseId,l),x=l===m.value,f=i.useRef(x);return i.useEffect(()=>{let e=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,s.jsx)(c.C,{present:r||x,children:a=>{let{present:i}=a;return(0,s.jsx)(o.sG.div,{"data-state":x?"active":"inactive","data-orientation":m.orientation,role:"tabpanel","aria-labelledby":h,hidden:!i,id:u,tabIndex:0,...d,ref:t,style:{...e.style,animationDuration:f.current?"0s":void 0},children:i&&n})}})});function A(e,t){return"".concat(e,"-trigger-").concat(t)}function C(e,t){return"".concat(e,"-content-").concat(t)}z.displayName=k;var S=a(3999);let _=y,M=i.forwardRef((e,t)=>{let{className:a,...i}=e;return(0,s.jsx)(j,{ref:t,className:(0,S.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",a),...i})});M.displayName=j.displayName;let P=i.forwardRef((e,t)=>{let{className:a,...i}=e;return(0,s.jsx)(w,{ref:t,className:(0,S.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",a),...i})});P.displayName=w.displayName;let T=i.forwardRef((e,t)=>{let{className:a,...i}=e;return(0,s.jsx)(z,{ref:t,className:(0,S.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",a),...i})});T.displayName=z.displayName},7133:(e,t,a)=>{"use strict";a.d(t,{SQ:()=>h,_2:()=>u,mB:()=>x,rI:()=>d,ty:()=>m});var s=a(5155),i=a(2115),l=a(8698),r=a(3052),n=a(5196),c=a(9428),o=a(3999);let d=l.bL,m=l.l9;l.YJ,l.ZL,l.Pb,l.z6,i.forwardRef((e,t)=>{let{className:a,inset:i,children:n,...c}=e;return(0,s.jsxs)(l.ZP,{ref:t,className:(0,o.cn)("flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",i&&"pl-8",a),...c,children:[n,(0,s.jsx)(r.A,{className:"ml-auto"})]})}).displayName=l.ZP.displayName,i.forwardRef((e,t)=>{let{className:a,...i}=e;return(0,s.jsx)(l.G5,{ref:t,className:(0,o.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...i})}).displayName=l.G5.displayName;let h=i.forwardRef((e,t)=>{let{className:a,sideOffset:i=4,...r}=e;return(0,s.jsx)(l.ZL,{children:(0,s.jsx)(l.UC,{ref:t,sideOffset:i,className:(0,o.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...r})})});h.displayName=l.UC.displayName;let u=i.forwardRef((e,t)=>{let{className:a,inset:i,...r}=e;return(0,s.jsx)(l.q7,{ref:t,className:(0,o.cn)("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",i&&"pl-8",a),...r})});u.displayName=l.q7.displayName,i.forwardRef((e,t)=>{let{className:a,children:i,checked:r,...c}=e;return(0,s.jsxs)(l.H_,{ref:t,className:(0,o.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),checked:r,...c,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(l.VF,{children:(0,s.jsx)(n.A,{className:"h-4 w-4"})})}),i]})}).displayName=l.H_.displayName,i.forwardRef((e,t)=>{let{className:a,children:i,...r}=e;return(0,s.jsxs)(l.hN,{ref:t,className:(0,o.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...r,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(l.VF,{children:(0,s.jsx)(c.A,{className:"h-2 w-2 fill-current"})})}),i]})}).displayName=l.hN.displayName,i.forwardRef((e,t)=>{let{className:a,inset:i,...r}=e;return(0,s.jsx)(l.JU,{ref:t,className:(0,o.cn)("px-2 py-1.5 text-sm font-semibold",i&&"pl-8",a),...r})}).displayName=l.JU.displayName;let x=i.forwardRef((e,t)=>{let{className:a,...i}=e;return(0,s.jsx)(l.wv,{ref:t,className:(0,o.cn)("-mx-1 my-1 h-px bg-muted",a),...i})});x.displayName=l.wv.displayName},7461:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(9946).A)("Disc3",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M6 12c0-1.7.7-3.2 1.8-4.2",key:"oqkarx"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M18 12c0 1.7-.7 3.2-1.8 4.2",key:"1eah9h"}]])},9338:(e,t,a)=>{"use strict";a.d(t,{F:()=>c,PlayerProvider:()=>n});var s=a(5155),i=a(2115),l=a(875);let r=(0,i.createContext)(void 0);function n(e){let{children:t}=e,a=(0,i.useRef)(null),[n,c]=(0,i.useState)(null),[o,d]=(0,i.useState)([]),[m,h]=(0,i.useState)(-1),[u,x]=(0,i.useState)(!1),[f,g]=(0,i.useState)(.8),[p,v]=(0,i.useState)(null),[y,b]=(0,i.useState)(0),[j,N]=(0,i.useState)(0),[w,k]=(0,i.useState)(!1),[z,A]=(0,i.useState)("none"),[C,S]=(0,i.useState)([]),[_,M]=(0,i.useState)(!1);(0,i.useEffect)(()=>{try{let e=localStorage.getItem("last_track_id");if(!e)return;(async()=>{try{let t=await l.i.getTrack(e);try{let e=await l.i.getAlbum(t.album_id);t.album_images=e.images||[]}catch(e){}c(t),d([t]),h(0)}catch(e){console.warn("[Player] Failed to restore last track",e)}})()}catch(e){}},[]),(0,i.useEffect)(()=>{a.current&&(a.current.volume=f)},[f]);let P=(0,i.useCallback)(async function(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];try{console.debug("[Player] loadAndMaybePlay",{trackId:e.id,name:e.name,autoplay:t});let s=await l.i.playTrack(e.id);v(s),a.current&&(a.current.src=s,t&&(await a.current.play(),x(!0))),M(!1)}catch(e){console.error("Failed to load stream",e)}},[]),T=(0,i.useCallback)(async(e,t)=>{var a,s;let i=null===(s=null==t?void 0:t.autoplay)||void 0===s||s;if(console.debug("[Player] play",{trackId:e.id,name:e.name,autoplay:i,queueLen:null==t?void 0:null===(a=t.queue)||void 0===a?void 0:a.length}),null==t?void 0:t.queue){let a=t.queue;S(a);let s=[...a].sort(()=>Math.random()-.5);d(s),k(!0);let i=s.findIndex(t=>t.id===e.id);h(i>=0?i:0)}c(e);try{localStorage.setItem("last_track_id",e.id)}catch(e){}await P(e,i)},[P]),L=(0,i.useCallback)(async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!e.length)return;console.debug("[Player] playQueue",{startIndex:t,tracks:e.map(e=>({id:e.id,name:e.name}))}),S(e);let a=[...e].sort(()=>Math.random()-.5);k(!0);let s=e[t],i=a.findIndex(e=>e.id===s.id);t=i>=0?i:0,d(a);let l=Math.max(0,Math.min(t,a.length-1));h(l);let r=a[l];c(r),await P(r,!0)},[P]),E=(0,i.useCallback)(()=>{a.current&&(a.current.pause(),x(!1))},[]),I=(0,i.useCallback)(()=>{let e=a.current;if(e){if((!e.src||0===e.src.length)&&n){P(n,!0);return}e.play().then(()=>x(!0)).catch(()=>{})}},[n,P]),R=(0,i.useCallback)(async()=>{if(0===o.length)return;let e=m+1;if(e>=o.length){if("all"!==z)return;e=0}h(e);let t=o[e];c(t),await P(t,!0)},[o,m,z,P]),q=(0,i.useCallback)(async()=>{if(0===o.length)return;let e=m-1;if(e<0){if("all"!==z)return;e=o.length-1}h(e);let t=o[e];c(t),await P(t,!0)},[o,m,z,P]),F=(0,i.useCallback)(e=>{g(Math.max(0,Math.min(1,e)))},[]),U=(0,i.useCallback)(e=>{let t=a.current;if(!t)return;let s=Math.max(0,Math.min(e,isFinite(t.duration)?t.duration:e));t.currentTime=s,b(s)},[]),D=(0,i.useCallback)(()=>{k(e=>{let t=!e;if(t){if(o.length>0){let e=[...o].sort(()=>Math.random()-.5);if(d(e),n){let t=e.findIndex(e=>e.id===n.id);t>=0&&h(t)}}}else console.log("[Player] Shuffle paused - keeping current queue order");return t})},[o,n]),$=(0,i.useCallback)(()=>{A(e=>"none"===e?"all":"all"===e?"one":"none")},[]);(0,i.useEffect)(()=>{let e=a.current;if(!e)return;let t=()=>{let t=e.currentTime||0;b(t),n&&!_&&t>30&&(t>.5*e.duration||t>30)&&(M(!0),window.addToHistoryGlobal&&window.addToHistoryGlobal(n.id))},s=()=>N(e.duration&&isFinite(e.duration)?e.duration:0),i=()=>x(!0),l=()=>x(!1),r=()=>{o.length>0&&("one"===z?n&&P(n,!0):w?R():(console.log("[Player] Shuffle paused - stopping playback after track ends"),x(!1)))};return e.addEventListener("timeupdate",t),e.addEventListener("loadedmetadata",s),e.addEventListener("play",i),e.addEventListener("pause",l),e.addEventListener("ended",r),()=>{e.removeEventListener("timeupdate",t),e.removeEventListener("loadedmetadata",s),e.removeEventListener("play",i),e.removeEventListener("pause",l),e.removeEventListener("ended",r)}},[o,z,n,R,P,w,_]);let G=(0,i.useMemo)(()=>({current:n,queue:o,isPlaying:u,volume:f,streamUrl:p,currentTime:y,duration:j,isShuffled:w,loopMode:z,play:T,playQueue:L,pause:E,resume:I,next:R,prev:q,setVolume:F,seek:U,toggleShuffle:D,toggleLoop:$}),[n,o,u,f,p,y,j,w,z,T,L,E,I,R,q,F,U,D,$]);return(0,s.jsxs)(r.Provider,{value:G,children:[t,(0,s.jsx)("audio",{ref:a})]})}function c(){let e=(0,i.useContext)(r);if(!e)throw Error("usePlayer must be used within PlayerProvider");return e}}},e=>{var t=t=>e(e.s=t);e.O(0,[9135,3965,3374,2390,1835,1541,855,1322,5970,8441,1684,7358],()=>t(165)),_N_E=e.O()}]);