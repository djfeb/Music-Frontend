(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9780],{1154:(e,t,a)=>{"use strict";a.d(t,{A:()=>l});let l=(0,a(9946).A)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},2355:(e,t,a)=>{"use strict";a.d(t,{A:()=>l});let l=(0,a(9946).A)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},5586:(e,t,a)=>{"use strict";function l(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"medium";if(!e)return"Unknown date";let a="string"==typeof e?new Date(e):e;if(isNaN(a.getTime()))return"Invalid date";switch(t){case"year":return a.getFullYear().toString();case"short":return a.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"});case"medium":return a.toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"});case"long":return a.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"});default:return a.toLocaleDateString("en-US")}}function r(e){if(!e)return"Unknown time";let t="string"==typeof e?new Date(e):e;if(isNaN(t.getTime()))return"Invalid date";let a=Math.ceil(Math.abs(new Date().getTime()-t.getTime())/864e5);return 0===a?"Today":1===a?"1 day ago":a<7?"".concat(a," days ago"):a<30?"".concat(Math.ceil(a/7)," weeks ago"):a<365?"".concat(Math.ceil(a/30)," months ago"):"".concat(Math.ceil(a/365)," years ago")}function n(e,t,a){let r=[l(e,"year")];return t&&r.push(t.charAt(0).toUpperCase()+t.slice(1)),a&&r.push("".concat(a," tracks")),r.join(" â€¢ ")}a.d(t,{Yq:()=>l,wI:()=>r,x_:()=>n})},7461:(e,t,a)=>{"use strict";a.d(t,{A:()=>l});let l=(0,a(9946).A)("Disc3",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M6 12c0-1.7.7-3.2 1.8-4.2",key:"oqkarx"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M18 12c0 1.7-.7 3.2-1.8 4.2",key:"1eah9h"}]])},8155:(e,t,a)=>{Promise.resolve().then(a.bind(a,9377))},9338:(e,t,a)=>{"use strict";a.d(t,{F:()=>o,PlayerProvider:()=>i});var l=a(5155),r=a(2115),n=a(875);let s=(0,r.createContext)(void 0);function i(e){let{children:t}=e,a=(0,r.useRef)(null),[i,o]=(0,r.useState)(null),[c,d]=(0,r.useState)([]),[u,m]=(0,r.useState)(-1),[h,g]=(0,r.useState)(!1),[f,y]=(0,r.useState)(.8),[v,x]=(0,r.useState)(null),[b,p]=(0,r.useState)(0),[w,j]=(0,r.useState)(0),[k,N]=(0,r.useState)(!1),[S,E]=(0,r.useState)("none"),[M,C]=(0,r.useState)([]),[L,_]=(0,r.useState)(!1);(0,r.useEffect)(()=>{try{let e=localStorage.getItem("last_track_id");if(!e)return;(async()=>{try{let t=await n.i.getTrack(e);try{let e=await n.i.getAlbum(t.album_id);t.album_images=e.images||[]}catch(e){}o(t),d([t]),m(0)}catch(e){console.warn("[Player] Failed to restore last track",e)}})()}catch(e){}},[]),(0,r.useEffect)(()=>{a.current&&(a.current.volume=f)},[f]);let A=(0,r.useCallback)(async function(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];try{console.debug("[Player] loadAndMaybePlay",{trackId:e.id,name:e.name,autoplay:t});let l=await n.i.playTrack(e.id);x(l),a.current&&(a.current.src=l,t&&(await a.current.play(),g(!0))),_(!1)}catch(e){console.error("Failed to load stream",e)}},[]),T=(0,r.useCallback)(async(e,t)=>{var a,l;let r=null===(l=null==t?void 0:t.autoplay)||void 0===l||l;if(console.debug("[Player] play",{trackId:e.id,name:e.name,autoplay:r,queueLen:null==t?void 0:null===(a=t.queue)||void 0===a?void 0:a.length}),null==t?void 0:t.queue){let a=t.queue;C(a);let l=[...a].sort(()=>Math.random()-.5);d(l),N(!0);let r=l.findIndex(t=>t.id===e.id);m(r>=0?r:0)}o(e);try{localStorage.setItem("last_track_id",e.id)}catch(e){}await A(e,r)},[A]),D=(0,r.useCallback)(async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!e.length)return;console.debug("[Player] playQueue",{startIndex:t,tracks:e.map(e=>({id:e.id,name:e.name}))}),C(e);let a=[...e].sort(()=>Math.random()-.5);N(!0);let l=e[t],r=a.findIndex(e=>e.id===l.id);t=r>=0?r:0,d(a);let n=Math.max(0,Math.min(t,a.length-1));m(n);let s=a[n];o(s),await A(s,!0)},[A]),P=(0,r.useCallback)(()=>{a.current&&(a.current.pause(),g(!1))},[]),z=(0,r.useCallback)(()=>{let e=a.current;if(e){if((!e.src||0===e.src.length)&&i){A(i,!0);return}e.play().then(()=>g(!0)).catch(()=>{})}},[i,A]),q=(0,r.useCallback)(async()=>{if(0===c.length)return;let e=u+1;if(e>=c.length){if("all"!==S)return;e=0}m(e);let t=c[e];o(t),await A(t,!0)},[c,u,S,A]),F=(0,r.useCallback)(async()=>{if(0===c.length)return;let e=u-1;if(e<0){if("all"!==S)return;e=c.length-1}m(e);let t=c[e];o(t),await A(t,!0)},[c,u,S,A]),I=(0,r.useCallback)(e=>{y(Math.max(0,Math.min(1,e)))},[]),U=(0,r.useCallback)(e=>{let t=a.current;if(!t)return;let l=Math.max(0,Math.min(e,isFinite(t.duration)?t.duration:e));t.currentTime=l,p(l)},[]),R=(0,r.useCallback)(()=>{N(e=>{let t=!e;if(t){if(c.length>0){let e=[...c].sort(()=>Math.random()-.5);if(d(e),i){let t=e.findIndex(e=>e.id===i.id);t>=0&&m(t)}}}else console.log("[Player] Shuffle paused - keeping current queue order");return t})},[c,i]),$=(0,r.useCallback)(()=>{E(e=>"none"===e?"all":"all"===e?"one":"none")},[]);(0,r.useEffect)(()=>{let e=a.current;if(!e)return;let t=()=>{let t=e.currentTime||0;p(t),i&&!L&&t>30&&(t>.5*e.duration||t>30)&&(_(!0),window.addToHistoryGlobal&&window.addToHistoryGlobal(i.id))},l=()=>j(e.duration&&isFinite(e.duration)?e.duration:0),r=()=>g(!0),n=()=>g(!1),s=()=>{c.length>0&&("one"===S?i&&A(i,!0):k?q():(console.log("[Player] Shuffle paused - stopping playback after track ends"),g(!1)))};return e.addEventListener("timeupdate",t),e.addEventListener("loadedmetadata",l),e.addEventListener("play",r),e.addEventListener("pause",n),e.addEventListener("ended",s),()=>{e.removeEventListener("timeupdate",t),e.removeEventListener("loadedmetadata",l),e.removeEventListener("play",r),e.removeEventListener("pause",n),e.removeEventListener("ended",s)}},[c,S,i,q,A,k,L]);let G=(0,r.useMemo)(()=>({current:i,queue:c,isPlaying:h,volume:f,streamUrl:v,currentTime:b,duration:w,isShuffled:k,loopMode:S,play:T,playQueue:D,pause:P,resume:z,next:q,prev:F,setVolume:I,seek:U,toggleShuffle:R,toggleLoop:$}),[i,c,h,f,v,b,w,k,S,T,D,P,z,q,F,I,U,R,$]);return(0,l.jsxs)(s.Provider,{value:G,children:[t,(0,l.jsx)("audio",{ref:a})]})}function o(){let e=(0,r.useContext)(s);if(!e)throw Error("usePlayer must be used within PlayerProvider");return e}},9377:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>x});var l=a(5155),r=a(2115),n=a(6874),s=a.n(n),i=a(6766),o=a(2355),c=a(7461),d=a(5690),u=a(1154),m=a(7168),h=a(7737),g=a(9338),f=a(5970),y=a(875),v=a(5586);function x(){let e=(0,g.F)(),[t,a]=(0,r.useState)([]),[n,x]=(0,r.useState)(!0),[b,p]=(0,r.useState)(1),[w,j]=(0,r.useState)(!0),k=(0,r.useRef)(null),[N,S]=(0,r.useState)(0);(0,r.useRef)(0),(0,r.useEffect)(()=>{E()},[]);let E=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;try{var t,l;x(!0);let r=await fetch("/api/proxy/albums?sort=release_date&order=desc&limit=24&page=".concat(e)),n=await r.json();1===e?a(n.data||[]):a(e=>{let t=new Set(e.map(e=>e.id)),a=(n.data||[]).filter(e=>!t.has(e.id));return[...e,...a]}),j((null===(t=n.pagination)||void 0===t?void 0:t.page)<(null===(l=n.pagination)||void 0===l?void 0:l.pages)),p(e),0===(n.data||[]).length&&1===e&&C()}catch(t){console.error("Error loading new releases:",t),1===e&&C()}finally{x(!1)}},M=()=>{k.current&&clearTimeout(k.current),k.current=null},C=()=>{!(N>=20)&&(M(),k.current=setTimeout(()=>{S(e=>e+1),E(1)},Math.min(15e3,2e3*Math.pow(1.4,N))))};return(0,l.jsxs)("div",{className:"flex h-[calc(100vh-5rem)] text-white overflow-hidden relative",children:[(0,l.jsxs)("div",{className:"absolute inset-0 bg-gradient-to-br from-slate-900 via-gray-900 to-zinc-900 animate-gradient-xy -z-10",children:[(0,l.jsx)("div",{className:"absolute inset-0 bg-gradient-to-tr from-purple-800/30 via-indigo-800/30 to-blue-800/30 animate-pulse"}),(0,l.jsx)("div",{className:"absolute inset-0 bg-gradient-to-bl from-slate-800/20 via-gray-800/20 to-zinc-800/20 animate-pulse",style:{animationDelay:"1s"}}),(0,l.jsx)("div",{className:"absolute inset-0 bg-gradient-to-tl from-violet-800/25 via-purple-800/25 to-indigo-800/25 animate-pulse",style:{animationDelay:"2s"}}),(0,l.jsx)("div",{className:"absolute top-20 left-20 w-32 h-32 bg-gradient-to-r from-purple-600/15 to-indigo-600/15 rounded-full blur-xl animate-float"}),(0,l.jsx)("div",{className:"absolute top-40 right-32 w-24 h-24 bg-gradient-to-r from-blue-600/15 to-cyan-600/15 rounded-full blur-xl animate-float",style:{animationDelay:"2s"}}),(0,l.jsx)("div",{className:"absolute bottom-32 left-1/4 w-40 h-40 bg-gradient-to-r from-violet-600/15 to-purple-600/15 rounded-full blur-xl animate-float",style:{animationDelay:"4s"}}),(0,l.jsx)("div",{className:"absolute bottom-20 right-20 w-28 h-28 bg-gradient-to-r from-indigo-600/15 to-blue-600/15 rounded-full blur-xl animate-float",style:{animationDelay:"1s"}}),(0,l.jsx)("div",{className:"absolute inset-0 bg-black/30"})]}),(0,l.jsx)(f.B,{}),(0,l.jsx)("main",{className:"flex-1 overflow-auto relative z-0",children:(0,l.jsxs)("div",{className:"px-4 sm:px-6 md:px-8 py-6",children:[(0,l.jsxs)("div",{className:"flex items-center gap-4 mb-8",children:[(0,l.jsx)(s(),{href:"/",children:(0,l.jsx)(m.$,{variant:"ghost",size:"icon",className:"hidden sm:flex rounded-full h-10 w-10",children:(0,l.jsx)(o.A,{className:"h-6 w-6"})})}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{className:"text-3xl md:text-4xl font-black mb-2",children:"New Releases"}),(0,l.jsx)("p",{className:"text-zinc-400",children:"The latest albums and singles"})]})]}),0===t.length?(0,l.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 xl:grid-cols-8 gap-4",children:Array.from({length:12}).map((e,t)=>(0,l.jsxs)("div",{className:"p-4 rounded-lg",children:[(0,l.jsx)("div",{className:"mb-4",children:(0,l.jsx)(h.E,{className:"aspect-square rounded-lg"})}),(0,l.jsx)(h.E,{className:"h-4 w-4/5 mb-2"}),(0,l.jsx)(h.E,{className:"h-3 w-1/3"})]},t))}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 xl:grid-cols-8 gap-4",children:t.map(t=>(0,l.jsxs)(s(),{href:"/album/".concat(t.id),className:"group p-4 rounded-lg hover:bg-white/5 transition-colors",children:[(0,l.jsxs)("div",{className:"relative aspect-square mb-4 rounded-lg overflow-hidden bg-zinc-800 shadow-lg",children:[t.images&&t.images.length>0?(0,l.jsx)(i.default,{src:t.images[0].url,alt:t.name,fill:!0,className:"object-cover group-hover:scale-105 transition-transform duration-300"}):(0,l.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,l.jsx)(c.A,{className:"h-16 w-16 text-zinc-600"})}),(0,l.jsx)("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:(0,l.jsx)(m.$,{size:"icon",className:"rounded-full h-12 w-12 bg-green-500 hover:bg-green-400 text-black shadow-lg",onClick:async a=>{a.preventDefault();try{let a=await y.i.getAlbumTracks(t.id);a&&a.length>0&&e.play(a[0],{queue:a,autoplay:!0})}catch(e){console.error("Failed to play album",e)}},children:(0,l.jsx)(d.A,{className:"h-6 w-6 ml-0.5"})})})]}),(0,l.jsx)("h3",{className:"font-semibold truncate mb-1",children:t.name}),(0,l.jsx)("p",{className:"text-sm text-zinc-400 truncate",children:(0,v.x_)(t.release_date,t.album_type)})]},t.id))}),w&&(0,l.jsx)("div",{className:"flex justify-center mt-8",children:(0,l.jsx)(m.$,{onClick:()=>{!n&&w&&E(b+1)},disabled:n,className:"bg-white text-black hover:bg-white/90",children:n?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(u.A,{className:"h-4 w-4 animate-spin mr-2"}),"Loading..."]}):"Load More"})})]})]})})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[9135,3965,3374,2390,1835,1322,5970,8441,1684,7358],()=>t(8155)),_N_E=e.O()}]);