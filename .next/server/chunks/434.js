exports.id=434,exports.ids=[434],exports.modules={12603:(e,t,s)=>{"use strict";s.d(t,{FirebaseNetwork:()=>r});let r=(0,s(12907).registerClientReference)(function(){throw Error("Attempted to call FirebaseNetwork() from the server but FirebaseNetwork is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"F:\\Music-Project\\group\\music-streaming_NOW_2\\components\\firebase-network.tsx","FirebaseNetwork")},13319:(e,t,s)=>{"use strict";s.d(t,{d:()=>f});var r=s(60687),a=s(85814),i=s.n(a),n=s(16189),o=s(43210),l=s(9989),c=s(96241);let d=l.Kq,u=l.bL,m=l.l9,h=o.forwardRef(({className:e,sideOffset:t=4,...s},a)=>(0,r.jsx)(l.UC,{ref:a,sideOffset:t,className:(0,c.cn)("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...s}));function f({artists:e,artistIds:t,maxLength:s=30,className:a="text-sm text-zinc-400 truncate",showLinks:o=!1,onClick:l,hideWhenEmpty:c=!1}){let f=(0,n.useRouter)(),p=(e,t,s)=>{l&&l(e),e.preventDefault(),e.stopPropagation(),s?f.push(`/artist/${s}`):f.push(`/search?q=${encodeURIComponent(t)}`)};if(!e||0===e.length)return c?null:(0,r.jsx)("span",{className:a});let x=e.join(", ");if(!(x.length>s))return o?(0,r.jsx)("span",{className:a,children:e.map((s,a)=>{let n=t?.[a],o=n?`/artist/${n}`:"#";return(0,r.jsxs)("span",{children:[(0,r.jsx)(i(),{href:o,className:"hover:text-white hover:underline transition-colors",onClick:e=>p(e,s,n),children:s}),a<e.length-1&&", "]},a)})}):(0,r.jsx)("span",{className:a,onClick:l,children:x});let v=(e,t)=>{if(e.length<=t)return e;let s=e.substring(0,t),r=s.lastIndexOf(","),a=s.lastIndexOf(" ");return r>0&&r>.5*t?e.substring(0,r)+"...":a>0&&a>.4*t?e.substring(0,a)+"...":s+"..."},g=v(x,s);return(0,r.jsx)(d,{delayDuration:100,children:(0,r.jsxs)(u,{children:[(0,r.jsx)(m,{asChild:!0,children:(0,r.jsx)("span",{className:a,onClick:l,style:{display:"inline"},children:o?(0,r.jsx)("span",{children:(()=>{let a=0,n=[],o=[];for(let r=0;r<e.length;r++){let i=e[r],l=0===r?i:", "+i;if(a+l.length<=s)n.push(i),o.push(t?.[r]),a+=l.length;else{let e=s-a;if(e>3&&i.length>3){let s=i.substring(0,e-3)+"...";n.push(s),o.push(t?.[r])}break}}if(0===n.length&&e.length>0){let a=e[0],n=t?.[0],o=v(a,s-3);return(0,r.jsxs)("span",{children:[(0,r.jsx)(i(),{href:n?`/artist/${n}`:"#",className:"hover:text-white hover:underline transition-colors",onClick:e=>p(e,a,n),children:o}),o.endsWith("...")?"":"..."]})}return(0,r.jsxs)(r.Fragment,{children:[n.map((t,s)=>{let a=t.endsWith("..."),l=a?e[s]:t,c=o[s];return(0,r.jsxs)("span",{children:[(0,r.jsx)(i(),{href:c?`/artist/${c}`:"#",className:"hover:text-white hover:underline transition-colors",onClick:e=>p(e,l,c),children:t}),s<n.length-1&&!a&&", "]},s)}),n.length<e.length&&!n[n.length-1]?.endsWith("...")&&"..."]})})()}):g})}),(0,r.jsx)(h,{side:"top",align:"start",sideOffset:6,className:"bg-zinc-800 border-zinc-700 text-white max-w-xs",children:(0,r.jsx)("p",{children:x})})]})})}h.displayName=l.UC.displayName},17968:(e,t,s)=>{"use strict";s.d(t,{DonationOverlayProvider:()=>a});var r=s(12907);let a=(0,r.registerClientReference)(function(){throw Error("Attempted to call DonationOverlayProvider() from the server but DonationOverlayProvider is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"F:\\Music-Project\\group\\music-streaming_NOW_2\\components\\donation-overlay-provider.tsx","DonationOverlayProvider");(0,r.registerClientReference)(function(){throw Error("Attempted to call useDonationOverlay() from the server but useDonationOverlay is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"F:\\Music-Project\\group\\music-streaming_NOW_2\\components\\donation-overlay-provider.tsx","useDonationOverlay")},24515:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,86346,23)),Promise.resolve().then(s.t.bind(s,27924,23)),Promise.resolve().then(s.t.bind(s,35656,23)),Promise.resolve().then(s.t.bind(s,40099,23)),Promise.resolve().then(s.t.bind(s,38243,23)),Promise.resolve().then(s.t.bind(s,28827,23)),Promise.resolve().then(s.t.bind(s,62763,23)),Promise.resolve().then(s.t.bind(s,97173,23))},24934:(e,t,s)=>{"use strict";s.d(t,{$:()=>c});var r=s(60687),a=s(43210),i=s(8730),n=s(24224),o=s(96241);let l=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=a.forwardRef(({className:e,variant:t,size:s,asChild:a=!1,...n},c)=>{let d=a?i.DX:"button";return(0,r.jsx)(d,{className:(0,o.cn)(l({variant:t,size:s,className:e})),ref:c,...n})});c.displayName="Button"},32775:(e,t,s)=>{"use strict";s.d(t,{DonationOverlayProvider:()=>x});var r=s(60687),a=s(43210),i=s(73188),n=s(75118),o=s(11860),l=s(67760),c=s(64398),d=s(85303),u=s(41312),m=s(24934),h=s(97380);function f({isVisible:e,onClose:t}){let[s,i]=(0,a.useState)(!1),n=()=>{i(!0),setTimeout(()=>{t(),i(!1)},300)};return e?(0,r.jsxs)("div",{className:`fixed inset-0 z-50 flex items-center justify-center transition-opacity duration-300 ${s?"opacity-0":"opacity-100"}`,children:[(0,r.jsx)("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",onClick:n}),(0,r.jsxs)("div",{className:"relative bg-gradient-to-br from-zinc-900 to-black border border-zinc-800 rounded-2xl p-8 max-w-md mx-4 shadow-2xl",children:[(0,r.jsx)(m.$,{variant:"ghost",size:"icon",className:"absolute top-4 right-4 text-zinc-400 hover:text-white",onClick:n,children:(0,r.jsx)(o.A,{className:"h-5 w-5"})}),(0,r.jsxs)("div",{className:"text-center space-y-6",children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("div",{className:"w-20 h-20 bg-gradient-to-r from-pink-500 to-red-500 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,r.jsx)(l.A,{className:"h-10 w-10 text-white"})}),(0,r.jsx)("div",{className:"absolute -top-2 -right-2 w-8 h-8 bg-yellow-500 rounded-full flex items-center justify-center",children:(0,r.jsx)(c.A,{className:"h-4 w-4 text-black"})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-white mb-2",children:"Enjoying MusicStream?"}),(0,r.jsx)("p",{className:"text-zinc-400 text-sm",children:"You've just played your first 5 tracks! \uD83C\uDFB5"})]}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 text-left",children:[(0,r.jsx)(d.A,{className:"h-5 w-5 text-green-500 flex-shrink-0"}),(0,r.jsx)("span",{className:"text-zinc-300 text-sm",children:"Unlimited music streaming"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-3 text-left",children:[(0,r.jsx)(u.A,{className:"h-5 w-5 text-blue-500 flex-shrink-0"}),(0,r.jsx)("span",{className:"text-zinc-300 text-sm",children:"Create and share playlists"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-3 text-left",children:[(0,r.jsx)(l.A,{className:"h-5 w-5 text-pink-500 flex-shrink-0"}),(0,r.jsx)("span",{className:"text-zinc-300 text-sm",children:"Save your favorite tracks"})]})]}),(0,r.jsx)("div",{className:"bg-zinc-800/50 rounded-lg p-4",children:(0,r.jsx)("p",{className:"text-zinc-300 text-sm leading-relaxed",children:"If you're enjoying the experience, consider supporting us to help keep MusicStream free and ad-free for everyone!"})}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsx)(h.v,{className:"w-full"}),(0,r.jsx)(m.$,{variant:"ghost",className:"w-full text-zinc-400 hover:text-white",onClick:n,children:"Maybe Later"})]}),(0,r.jsx)("p",{className:"text-xs text-zinc-500",children:"Your support helps us maintain and improve the service"})]})]})]}):null}let p=(0,a.createContext)(void 0);function x({children:e}){let{user:t}=(0,i.A)();(0,n.F)();let[s,o]=(0,a.useState)(!1),[l,c]=(0,a.useState)(!1),[d,u]=(0,a.useState)(0);(0,a.useRef)(null);let m=()=>{o(!1)};return(0,r.jsxs)(p.Provider,{value:{showDonationOverlay:()=>{o(!0)},hideDonationOverlay:m},children:[e,(0,r.jsx)(f,{isVisible:s,onClose:m})]})}},52358:(e,t,s)=>{"use strict";s.d(t,{Toaster:()=>r});let r=(0,s(12907).registerClientReference)(function(){throw Error("Attempted to call Toaster() from the server but Toaster is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"F:\\Music-Project\\group\\music-streaming_NOW_2\\components\\ui\\toaster.tsx","Toaster")},58014:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>f,metadata:()=>h});var r=s(37413);s(82704);var a=s(61421),i=s.n(a),n=s(83066),o=s(52358),l=s(82981),c=s(70940),d=s(92524),u=s(12603),m=s(17968);let h={title:"MusicStream - Your Music Streaming App",description:"Stream your favorite music anytime, anywhere",generator:"v0.dev"};function f({children:e}){return(0,r.jsx)("html",{lang:"en",suppressHydrationWarning:!0,children:(0,r.jsx)("body",{className:i().className,suppressHydrationWarning:!0,children:(0,r.jsx)(n.ThemeProvider,{attribute:"class",defaultTheme:"dark",enableSystem:!0,disableTransitionOnChange:!0,children:(0,r.jsx)(l.AuthProvider,{children:(0,r.jsx)(c.PlayerProvider,{children:(0,r.jsxs)(m.DonationOverlayProvider,{children:[(0,r.jsx)("div",{className:"pb-20 sm:pb-24 lg:pb-20",children:e}),(0,r.jsx)(d.MusicPlayer,{}),(0,r.jsx)(u.FirebaseNetwork,{}),(0,r.jsx)(o.Toaster,{})]})})})})})})}},60217:(e,t,s)=>{"use strict";s.d(t,{i:()=>a}),function(){let e=parseInt(process.env.PORT||"3001",10);process.env.API_BASE_URL||process.env.VERCEL_URL?`https://${process.env.VERCEL_URL}`:"http://localhost:3001"}();class r{async request(e,t){let s=process.env.PROXY_TARGET_URL||process.env.BACKEND_URL||"http://localhost:3000";if(console.log("[MusicAPI] Request details:",{endpoint:e,baseUrl:s,isClient:!1}),!s||"undefined"===s||s.includes("undefined"))throw Error("Invalid API base URL. IP discovery may not have completed yet.");let r=`${s}${e}`;console.log("[MusicAPI] Constructing URL:",{baseUrl:s,endpoint:e,fullUrl:r});try{let e;let a=null;if(s.startsWith("/"))e=r,t&&(a=new URLSearchParams,Object.entries(t).forEach(([e,t])=>{null!=t&&a.append(e,String(t))}),a.toString()&&(e+=`?${a.toString()}`));else{let s=new URL(r);t&&Object.entries(t).forEach(([e,t])=>{null!=t&&s.searchParams.append(e,String(t))}),e=s.toString()}console.log("[MusicAPI] Final fetch URL:",e);let i=await fetch(e,{cache:"no-store"});if(!i.ok)throw Error(`API request failed: ${i.statusText}`);return i.json()}catch(e){throw console.error("[MusicAPI] URL construction failed:",{fullUrl:r,error:e}),Error(`Invalid URL construction: ${r}`)}}async getArtists(e){return this.request("/artists",e)}async getArtist(e){return this.request(`/artists/${e}`)}async searchArtists(e){return this.request(`/artists/search/${encodeURIComponent(e)}`)}async getArtistAlbums(e){return this.request(`/artists/${e}/albums`)}async getArtistTracks(e){return this.request(`/artists/${e}/tracks`)}async getAlbums(e){return this.request("/albums",e)}async getAlbum(e){return this.request(`/albums/${e}`)}async searchAlbums(e){return this.request(`/albums/search/${encodeURIComponent(e)}`)}async getAlbumTracks(e){return this.request(`/albums/${e}/tracks`)}async getTracks(e){return this.request("/tracks",e)}async getTrack(e){return this.request(`/tracks/${e}`)}async searchTracks(e){return this.request(`/tracks/search/${encodeURIComponent(e)}`)}async playTrack(e){return`/api/proxy/play/${e}`}async downloadTrack(e){return`/api/proxy/download/${e}`}async getStats(){return this.request("/stats")}async getFeaturedContent(){let[e,t,s]=await Promise.all([this.getAlbums({sort:"popularity",order:"desc",limit:10}),this.getTracks({sort:"popularity",order:"desc",limit:10}),this.getArtists({sort:"popularity",order:"desc",limit:9})]);return{featuredAlbums:e.data.slice(0,5),popularTracks:t.data.slice(0,10),topArtists:s.data.slice(0,9)}}async getGenres(){return(await this.request("/genres")).data}async getGenresWithCounts(){return(await this.request("/genres/counts")).data}}let a=new r},61037:(e,t,s)=>{"use strict";s.d(t,{a:()=>a});var r=s(43210);function a(){let[e,t]=r.useState(void 0);return r.useEffect(()=>{let e=window.matchMedia("(max-width: 1023px)"),s=()=>{t(window.innerWidth<1024)};return e.addEventListener("change",s),t(window.innerWidth<1024),()=>e.removeEventListener("change",s)},[]),!!e}},64843:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,16444,23)),Promise.resolve().then(s.t.bind(s,16042,23)),Promise.resolve().then(s.t.bind(s,88170,23)),Promise.resolve().then(s.t.bind(s,49477,23)),Promise.resolve().then(s.t.bind(s,29345,23)),Promise.resolve().then(s.t.bind(s,12089,23)),Promise.resolve().then(s.t.bind(s,46577,23)),Promise.resolve().then(s.t.bind(s,31307,23))},70019:(e,t,s)=>{Promise.resolve().then(s.bind(s,32775)),Promise.resolve().then(s.bind(s,95473)),Promise.resolve().then(s.bind(s,86497)),Promise.resolve().then(s.bind(s,92892)),Promise.resolve().then(s.bind(s,79917)),Promise.resolve().then(s.bind(s,73188)),Promise.resolve().then(s.bind(s,75118))},70333:(e,t,s)=>{"use strict";s.d(t,{dj:()=>m});var r=s(43210);let a=0,i=new Map,n=e=>{if(i.has(e))return;let t=setTimeout(()=>{i.delete(e),d({type:"REMOVE_TOAST",toastId:e})},1e6);i.set(e,t)},o=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?n(s):e.toasts.forEach(e=>{n(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},l=[],c={toasts:[]};function d(e){c=o(c,e),l.forEach(e=>{e(c)})}function u({...e}){let t=(a=(a+1)%Number.MAX_SAFE_INTEGER).toString(),s=()=>d({type:"DISMISS_TOAST",toastId:t});return d({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:e=>{e||s()}}}),{id:t,dismiss:s,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:t}})}}function m(){let[e,t]=r.useState(c);return r.useEffect(()=>(l.push(t),()=>{let e=l.indexOf(t);e>-1&&l.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>d({type:"DISMISS_TOAST",toastId:e})}}},70940:(e,t,s)=>{"use strict";s.d(t,{PlayerProvider:()=>a});var r=s(12907);let a=(0,r.registerClientReference)(function(){throw Error("Attempted to call PlayerProvider() from the server but PlayerProvider is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"F:\\Music-Project\\group\\music-streaming_NOW_2\\contexts\\player-context.tsx","PlayerProvider");(0,r.registerClientReference)(function(){throw Error("Attempted to call usePlayer() from the server but usePlayer is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"F:\\Music-Project\\group\\music-streaming_NOW_2\\contexts\\player-context.tsx","usePlayer")},73188:(e,t,s)=>{"use strict";s.d(t,{AuthProvider:()=>d,A:()=>u});var r=s(60687),a=s(43210),i=s(61448),n=s(80043),o=s(93385);let l="profile_img_",c=(0,a.createContext)({user:null,isLoading:!0,signIn:async()=>!1,signUp:async()=>!1,signInWithGoogle:async()=>!1,signOut:()=>{},deleteAccount:async()=>!1,addToFavorites:async()=>{},removeFromFavorites:async()=>{},favoriteTrackIds:[],refreshFavorites:async()=>{},followArtist:async()=>{},unfollowArtist:async()=>{},followedArtistIds:[],refreshFollowedArtists:async()=>{},likeAlbum:async()=>{},unlikeAlbum:async()=>{},likedAlbumIds:[],refreshLikedAlbums:async()=>{},addToHistory:async()=>{},historyTrackIds:[],refreshHistory:async()=>{},contentPreferences:null,updateContentPreferences:async()=>{},showPreferenceOverlay:!1});function d({children:e}){let[t,s]=(0,a.useState)(null),[l,d]=(0,a.useState)(!0),[u,m]=(0,a.useState)([]),[h,f]=(0,a.useState)([]),[p,x]=(0,a.useState)([]),[v,g]=(0,a.useState)([]),[b,y]=(0,a.useState)(null),[w,j]=(0,a.useState)(!1),N=async(e,t)=>{try{return await (0,i.x9)(n.j2,e,t),!0}catch(e){throw console.error("Sign in error:",e),e}},k=async(e,t,s)=>{try{let r=(await (0,i.eJ)(n.j2,t,s)).user;return await o.firebaseService.createUserProfile({uid:r.uid,displayName:e,email:r.email||"",photoURL:r.photoURL||void 0}),!0}catch(e){return console.error("Sign up error:",e),!1}},P=async()=>{try{console.log("[Auth] Starting Google sign-in with popup...");let e=(await (0,i.df)(n.j2,n.hJ)).user;return console.log("[Auth] Google sign-in successful:",{uid:e.uid,email:e.email,displayName:e.displayName}),await o.firebaseService.getUserProfile(e.uid)||(console.log("[Auth] Creating new user profile..."),await o.firebaseService.createUserProfile({uid:e.uid,displayName:e.displayName||"User",email:e.email||"",photoURL:e.photoURL||void 0})),!0}catch(e){if("auth/popup-closed-by-user"===e.code)return console.log("[Auth] User closed the sign-in popup"),!1;if("auth/popup-blocked"===e.code)throw console.error("[Auth] Popup was blocked by browser"),Error("Please allow popups for this site to sign in with Google");throw console.error("[Auth] Google sign-in error:",e),e}},A=async()=>{try{await (0,i.CI)(n.j2)}catch(e){console.error("Sign out error:",e)}},S=async()=>{if(!t)return!1;try{await o.firebaseService.deleteUserAccount(t.uid);let e=n.j2.currentUser;return e&&await (0,i.hG)(e),s(null),m([]),f([]),x([]),g([]),y(null),j(!1),!0}catch(e){throw console.error("Delete account error:",e),e}},C=async e=>{if(t)try{await o.firebaseService.addToFavorites(t.uid,e),u.includes(e)||m(t=>[...t,e])}catch(e){console.error("Error adding to favorites:",e)}},$=async e=>{if(t)try{await o.firebaseService.removeFromFavorites(t.uid,e),m(t=>t.filter(t=>t!==e))}catch(e){console.error("Error removing from favorites:",e)}},T=async()=>{if(t)try{let e=await o.firebaseService.getUserFavorites(t.uid);m(e)}catch(e){console.error("Error refreshing favorites:",e)}},M=async e=>{if(t)try{await o.firebaseService.addToLibrary(t.uid,"artist",e),h.includes(e)||f(t=>[...t,e])}catch(e){console.error("Error following artist:",e)}},E=async e=>{if(t)try{await o.firebaseService.removeFromLibrary(t.uid,"artist",e),f(t=>t.filter(t=>t!==e))}catch(e){console.error("Error unfollowing artist:",e)}},z=async()=>{if(t)try{let e=await o.firebaseService.getUserLibrary(t.uid,"artist");f(e.map(e=>e.itemId))}catch(e){console.error("Error refreshing followed artists:",e)}},I=async e=>{if(t)try{await o.firebaseService.addToLibrary(t.uid,"album",e),p.includes(e)||x(t=>[...t,e])}catch(e){console.error("Error liking album:",e)}},O=async e=>{if(t)try{await o.firebaseService.removeFromLibrary(t.uid,"album",e),x(t=>t.filter(t=>t!==e))}catch(e){console.error("Error unliking album:",e)}},_=async()=>{if(t)try{let e=await o.firebaseService.getUserLibrary(t.uid,"album");x(e.map(e=>e.itemId))}catch(e){console.error("Error refreshing liked albums:",e)}},F=async e=>{if(t)try{await o.firebaseService.addToHistory(t.uid,e),g(t=>[e,...t.filter(t=>t!==e)])}catch(e){console.error("Error adding to history:",e)}},U=async()=>{if(t)try{let e=await o.firebaseService.getUserHistory(t.uid);g(e)}catch(e){console.error("Error refreshing history:",e)}},R=async e=>{if(t)try{await o.firebaseService.updateContentPreferences(t.uid,e),y(e),j(!1)}catch(e){console.error("Error updating content preferences:",e)}};return(0,r.jsx)(c.Provider,{value:{user:t,isLoading:l,signIn:N,signUp:k,signInWithGoogle:P,signOut:A,deleteAccount:S,addToFavorites:C,removeFromFavorites:$,favoriteTrackIds:u,refreshFavorites:T,followArtist:M,unfollowArtist:E,followedArtistIds:h,refreshFollowedArtists:z,likeAlbum:I,unlikeAlbum:O,likedAlbumIds:p,refreshLikedAlbums:_,addToHistory:F,historyTrackIds:v,refreshHistory:U,contentPreferences:b,updateContentPreferences:R,showPreferenceOverlay:w},children:e})}function u(){return(0,a.useContext)(c)}},75118:(e,t,s)=>{"use strict";s.d(t,{F:()=>l,PlayerProvider:()=>o});var r=s(60687),a=s(43210),i=s(60217);let n=(0,a.createContext)(void 0);function o({children:e}){let t=(0,a.useRef)(null),[s,o]=(0,a.useState)(null),[l,c]=(0,a.useState)([]),[d,u]=(0,a.useState)(-1),[m,h]=(0,a.useState)(!1),[f,p]=(0,a.useState)(.8),[x,v]=(0,a.useState)(null),[g,b]=(0,a.useState)(0),[y,w]=(0,a.useState)(0),[j,N]=(0,a.useState)(!1),[k,P]=(0,a.useState)("none"),[A,S]=(0,a.useState)([]),[C,$]=(0,a.useState)(!1),T=(0,a.useCallback)(async(e,s=!0)=>{try{console.debug("[Player] loadAndMaybePlay",{trackId:e.id,name:e.name,autoplay:s});let r=await i.i.playTrack(e.id);v(r),t.current&&(t.current.src=r,s&&(await t.current.play(),h(!0))),$(!1)}catch(e){console.error("Failed to load stream",e)}},[]),M=(0,a.useCallback)(async(e,t)=>{let s=t?.autoplay??!0;if(console.debug("[Player] play",{trackId:e.id,name:e.name,autoplay:s,queueLen:t?.queue?.length}),t?.queue){let s=t.queue;S(s);let r=[...s].sort(()=>Math.random()-.5);c(r),N(!0);let a=r.findIndex(t=>t.id===e.id);u(a>=0?a:0)}o(e);try{localStorage.setItem("last_track_id",e.id)}catch{}await T(e,s)},[T]),E=(0,a.useCallback)(async(e,t=0)=>{if(!e.length)return;console.debug("[Player] playQueue",{startIndex:t,tracks:e.map(e=>({id:e.id,name:e.name}))}),S(e);let s=[...e].sort(()=>Math.random()-.5);N(!0);let r=e[t],a=s.findIndex(e=>e.id===r.id);t=a>=0?a:0,c(s);let i=Math.max(0,Math.min(t,s.length-1));u(i);let n=s[i];o(n),await T(n,!0)},[T]),z=(0,a.useCallback)(()=>{t.current&&(t.current.pause(),h(!1))},[]),I=(0,a.useCallback)(()=>{let e=t.current;if(e){if((!e.src||0===e.src.length)&&s){T(s,!0);return}e.play().then(()=>h(!0)).catch(()=>{})}},[s,T]),O=(0,a.useCallback)(async()=>{if(0===l.length)return;let e=d+1;if(e>=l.length){if("all"!==k)return;e=0}u(e);let t=l[e];o(t),await T(t,!0)},[l,d,k,T]),_=(0,a.useCallback)(async()=>{if(0===l.length)return;let e=d-1;if(e<0){if("all"!==k)return;e=l.length-1}u(e);let t=l[e];o(t),await T(t,!0)},[l,d,k,T]),F=(0,a.useCallback)(e=>{p(Math.max(0,Math.min(1,e)))},[]),U=(0,a.useCallback)(e=>{let s=t.current;if(!s)return;let r=Math.max(0,Math.min(e,isFinite(s.duration)?s.duration:e));s.currentTime=r,b(r)},[]),R=(0,a.useCallback)(()=>{N(e=>{let t=!e;if(t){if(l.length>0){let e=[...l].sort(()=>Math.random()-.5);if(c(e),s){let t=e.findIndex(e=>e.id===s.id);t>=0&&u(t)}}}else console.log("[Player] Shuffle paused - keeping current queue order");return t})},[l,s]),L=(0,a.useCallback)(()=>{P(e=>"none"===e?"all":"all"===e?"one":"none")},[]),D=(0,a.useMemo)(()=>({current:s,queue:l,isPlaying:m,volume:f,streamUrl:x,currentTime:g,duration:y,isShuffled:j,loopMode:k,play:M,playQueue:E,pause:z,resume:I,next:O,prev:_,setVolume:F,seek:U,toggleShuffle:R,toggleLoop:L}),[s,l,m,f,x,g,y,j,k,M,E,z,I,O,_,F,U,R,L]);return(0,r.jsxs)(n.Provider,{value:D,children:[e,(0,r.jsx)("audio",{ref:t})]})}function l(){let e=(0,a.useContext)(n);if(!e)throw Error("usePlayer must be used within PlayerProvider");return e}},79917:(e,t,s)=>{"use strict";s.d(t,{Toaster:()=>k});var r=s(60687),a=s(43210);let i=0,n=new Map,o=e=>{if(n.has(e))return;let t=setTimeout(()=>{n.delete(e),u({type:"REMOVE_TOAST",toastId:e})},1e6);n.set(e,t)},l=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?o(s):e.toasts.forEach(e=>{o(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},c=[],d={toasts:[]};function u(e){d=l(d,e),c.forEach(e=>{e(d)})}function m({...e}){let t=(i=(i+1)%Number.MAX_SAFE_INTEGER).toString(),s=()=>u({type:"DISMISS_TOAST",toastId:t});return u({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:e=>{e||s()}}}),{id:t,dismiss:s,update:e=>u({type:"UPDATE_TOAST",toast:{...e,id:t}})}}var h=s(47313),f=s(24224),p=s(11860),x=s(96241);let v=h.Kq,g=a.forwardRef(({className:e,...t},s)=>(0,r.jsx)(h.LM,{ref:s,className:(0,x.cn)("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));g.displayName=h.LM.displayName;let b=(0,f.F)("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),y=a.forwardRef(({className:e,variant:t,...s},a)=>(0,r.jsx)(h.bL,{ref:a,className:(0,x.cn)(b({variant:t}),e),...s}));y.displayName=h.bL.displayName,a.forwardRef(({className:e,...t},s)=>(0,r.jsx)(h.rc,{ref:s,className:(0,x.cn)("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t})).displayName=h.rc.displayName;let w=a.forwardRef(({className:e,...t},s)=>(0,r.jsx)(h.bm,{ref:s,className:(0,x.cn)("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:(0,r.jsx)(p.A,{className:"h-4 w-4"})}));w.displayName=h.bm.displayName;let j=a.forwardRef(({className:e,...t},s)=>(0,r.jsx)(h.hE,{ref:s,className:(0,x.cn)("text-sm font-semibold",e),...t}));j.displayName=h.hE.displayName;let N=a.forwardRef(({className:e,...t},s)=>(0,r.jsx)(h.VY,{ref:s,className:(0,x.cn)("text-sm opacity-90",e),...t}));function k(){let{toasts:e}=function(){let[e,t]=a.useState(d);return a.useEffect(()=>(c.push(t),()=>{let e=c.indexOf(t);e>-1&&c.splice(e,1)}),[e]),{...e,toast:m,dismiss:e=>u({type:"DISMISS_TOAST",toastId:e})}}();return(0,r.jsxs)(v,{children:[e.map(function({id:e,title:t,description:s,action:a,...i}){return(0,r.jsxs)(y,{...i,children:[(0,r.jsxs)("div",{className:"grid gap-1",children:[t&&(0,r.jsx)(j,{children:t}),s&&(0,r.jsx)(N,{children:s})]}),a,(0,r.jsx)(w,{})]},e)}),(0,r.jsx)(g,{})]})}N.displayName=h.VY.displayName},80043:(e,t,s)=>{"use strict";s.d(t,{db:()=>c,hJ:()=>d,j2:()=>l});var r=s(67989),a=s(61448),i=s(75535),n=s(70146);let o=(0,r.Wp)({apiKey:"AIzaSyCpI2GRtLXksYu-p9SoFvr1FwM99sOkcSw",authDomain:"music-streaming-app-dcd57.firebaseapp.com",projectId:"music-streaming-app-dcd57",storageBucket:"music-streaming-app-dcd57.firebasestorage.app",messagingSenderId:"10885097238",appId:"1:10885097238:web:caa03da858ec3225f49237",measurementId:"G-YQVQTS2X6H"}),l=(0,a.xI)(o),c=(0,i.aU)(o);(0,n.c7)(o);let d=new a.HF;d.setCustomParameters({prompt:"select_account"})},82704:()=>{},82981:(e,t,s)=>{"use strict";s.d(t,{AuthProvider:()=>a});var r=s(12907);let a=(0,r.registerClientReference)(function(){throw Error("Attempted to call AuthProvider() from the server but AuthProvider is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"F:\\Music-Project\\group\\music-streaming_NOW_2\\contexts\\auth-context.tsx","AuthProvider");(0,r.registerClientReference)(function(){throw Error("Attempted to call useAuth() from the server but useAuth is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"F:\\Music-Project\\group\\music-streaming_NOW_2\\contexts\\auth-context.tsx","useAuth")},83066:(e,t,s)=>{"use strict";s.d(t,{ThemeProvider:()=>r});let r=(0,s(12907).registerClientReference)(function(){throw Error("Attempted to call ThemeProvider() from the server but ThemeProvider is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"F:\\Music-Project\\group\\music-streaming_NOW_2\\components\\theme-provider.tsx","ThemeProvider")},86497:(e,t,s)=>{"use strict";s.d(t,{MusicPlayer:()=>$});var r=s(60687),a=s(43210),i=s(30474),n=s(67760),o=s(96571),l=s(79351),c=s(81620),d=s(31158),u=s(28097),m=s(27085),h=s(36058),f=s(97840),p=s(95293),x=s(89863),v=s(98133),g=s(89925),b=s(91391),y=s(24851),w=s(96241);let j=a.forwardRef(({className:e,...t},s)=>(0,r.jsxs)(y.bL,{ref:s,className:(0,w.cn)("relative flex w-full touch-none select-none items-center",e),...t,children:[(0,r.jsx)(y.CC,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:(0,r.jsx)(y.Q6,{className:"absolute h-full bg-primary"})}),(0,r.jsx)(y.zi,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));j.displayName=y.bL.displayName;var N=s(24934),k=s(73188),P=s(75118),A=s(13319),S=s(70333),C=s(61037);function $(){let e=(0,P.F)(),t=(0,C.a)(),[s,y]=(0,a.useState)(80),[w,$]=(0,a.useState)(!1),[T,M]=(0,a.useState)(80),[E,z]=(0,a.useState)(!1),[I,O]=(0,a.useState)(null),[_,F]=(0,a.useState)(!1),[U,R]=(0,a.useState)(0),L=(0,a.useRef)(null),D=(0,a.useRef)([]),{user:G,favoriteTrackIds:q,addToFavorites:J,removeFromFavorites:W,addToHistory:H}=(0,k.A)(),{toast:V}=(0,S.dj)(),[B,Y]=(0,a.useState)(null),[X,Q]=(0,a.useState)(!1),Z=(0,a.useRef)(null),K=e.current,ee=K?.name??"";K?.artists?.join(", ");let et=K?.album_images?.[0]?.url||"",es=e.duration||0,er=e.currentTime||0,ea=!!K&&q.includes(K.id),ei=()=>{if(!G){V({title:"Sign in required",description:"Please sign in to save tracks to your favorites",variant:"destructive"});return}K&&(ea?(W(K.id),V({title:"Removed from favorites",description:`"${ee}" has been removed from your favorites`})):(J(K.id),V({title:"Added to favorites",description:`"${ee}" has been added to your favorites`})))},en=()=>{e.toggleShuffle()},eo=()=>{e.toggleLoop()},el=e=>{let t=Math.floor(e/60),s=Math.floor(e%60);return`${t}:${s.toString().padStart(2,"0")}`},ec=(0,a.useMemo)(()=>{if(!I||!_)return[];let e=I.split(/\r?\n/),t=[],s=/\[(\d{1,2}):(\d{1,2})(?:\.(\d{1,2}))?\]/g;for(let r of e){let e;let a=[];for(s.lastIndex=0;e=s.exec(r);){let t=Number(e[1]),s=60*t+Number(e[2])+(e[3]?Number(e[3]):0)/100;a.push(s)}let i=r.replace(s,"").trim();if(a.length&&i)for(let e of a)t.push({time:e,text:i})}return t.sort((e,t)=>e.time-t.time)},[I,_]),ed=(0,a.useMemo)(()=>{if(!I||_)return[];let e=I.split(/\r?\n/),t=[];for(let s of e){let e=s.trimEnd();if(!e.length){t.push({kind:"line",text:""});continue}let r=e.match(/^\[([^\]]+)\]$/);r?t.push({kind:"header",text:r[1]}):t.push({kind:"line",text:e})}return t},[I,_]),eu=(0,a.useCallback)(()=>{Q(!0),z(!0),setTimeout(()=>{Z.current&&Z.current.requestFullscreen&&Z.current.requestFullscreen()},10)},[]),em=(0,a.useCallback)(()=>{document.fullscreenElement&&document.exitFullscreen(),Q(!1)},[]);return(0,r.jsxs)(r.Fragment,{children:[X&&(0,r.jsxs)("div",{ref:Z,className:"fixed inset-0 z-50 bg-black flex flex-col items-center justify-center overflow-hidden animate-fade-in",children:[(0,r.jsxs)("div",{className:"absolute inset-0 -z-10",children:[et&&(0,r.jsx)(i.default,{src:et,alt:"bg",fill:!0,className:"object-cover w-full h-full blur-2xl scale-110 opacity-60 transition-all duration-700"}),(0,r.jsx)("div",{className:"absolute inset-0 bg-black/60"})]}),(0,r.jsxs)("div",{className:"w-full flex justify-between items-center px-4 sm:px-8 pt-4 sm:pt-8",children:[(0,r.jsx)("div",{className:"flex items-center gap-4",children:(0,r.jsx)(N.$,{variant:"ghost",size:"icon",className:"text-white",onClick:em,children:(0,r.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("path",{d:"M9 9L5 5M5 5v4M5 5h4"}),(0,r.jsx)("path",{d:"M15 9l4-4m0 0v4m0-4h-4"}),(0,r.jsx)("path",{d:"M15 15l4 4m0 0v-4m0 4h-4"}),(0,r.jsx)("path",{d:"M9 15l-4 4m0 0v-4m0 4h4"})]})})}),(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)(N.$,{variant:"ghost",size:"icon",className:`text-white ${ea?"text-red-500":""}`,onClick:ei,children:(0,r.jsx)(n.A,{className:"h-6 w-6"})}),(0,r.jsxs)(N.$,{variant:"ghost",size:"icon",className:"text-white",onClick:()=>z(e=>!e),children:[(0,r.jsx)(o.A,{className:"h-6 w-6"}),I&&(0,r.jsx)("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-green-500 rounded-full"})]}),(0,r.jsx)(N.$,{variant:"ghost",size:"icon",className:"text-white",onClick:em,children:(0,r.jsx)(l.A,{className:"h-6 w-6 rotate-180"})})]})]}),(0,r.jsx)("div",{className:"flex flex-col lg:flex-row flex-1 w-full max-w-5xl items-center justify-center gap-6 sm:gap-8 lg:gap-12 px-4 sm:px-8",children:(0,r.jsxs)("div",{className:"flex flex-col items-center gap-6 sm:gap-8 w-full lg:w-1/2",children:[(0,r.jsx)("div",{className:"relative w-48 h-48 sm:w-64 sm:h-64 lg:w-72 lg:h-72 rounded-2xl overflow-hidden shadow-2xl border-4 border-white/10 bg-zinc-800",children:et?(0,r.jsx)(i.default,{src:et,alt:ee,fill:!0,className:"object-cover"}):(0,r.jsx)("div",{className:"w-full h-full flex items-center justify-center text-4xl sm:text-6xl",children:"\uD83C\uDFB5"})}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("h2",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-white mb-2 drop-shadow-lg truncate max-w-[28ch] mx-auto",title:ee,children:ee}),(0,r.jsx)(A.d,{artists:K?.artists,artistIds:K?.artist_ids,maxLength:40,className:"text-lg sm:text-xl text-zinc-200 mb-1 truncate max-w-[36ch] mx-auto block",showLinks:!0}),(0,r.jsxs)("div",{className:"flex items-center justify-center gap-2 mt-2",children:[(0,r.jsx)(N.$,{variant:"ghost",size:"icon",className:"text-white",onClick:()=>{try{if(!K?.id||!K?.album_id)return;let e=`${window.location.origin}/album/${K.album_id}?track=${K.id}`;navigator.clipboard.writeText(e),V({title:"Link copied",description:"Track link copied to clipboard"})}catch{}},"aria-label":"Share track",children:(0,r.jsx)(c.A,{className:"h-4 w-4 sm:h-5 sm:w-5"})}),(0,r.jsx)(N.$,{variant:"ghost",size:"icon",className:"text-white",onClick:()=>{if(!K?.id)return;let e=`/api/proxy/download/${K.id}`,t=document.createElement("a");t.href=e,t.download=`${ee||"track"}.mp3`,t.target="_blank",document.body.appendChild(t),t.click(),document.body.removeChild(t)},"aria-label":"Download track",children:(0,r.jsx)(d.A,{className:"h-4 w-4 sm:h-5 sm:w-5"})})]})]}),(0,r.jsx)("div",{className:"w-full flex items-center justify-center mt-4",children:(0,r.jsx)("div",{className:"w-48 sm:w-64 h-10 sm:h-12 bg-zinc-800/60 rounded-lg flex items-end gap-1 overflow-hidden",children:[...Array(32)].map((e,t)=>(0,r.jsx)("div",{className:"w-1 rounded bg-green-400/80 animate-pulse",style:{height:`${48*Math.random()+8}px`,animationDelay:`${.05*t}s`}},t))})})]})}),(0,r.jsxs)("div",{className:"w-full flex flex-col items-center gap-4 pb-8 sm:pb-12 pt-6 sm:pt-8",children:[(0,r.jsxs)("div",{className:"flex items-center gap-6 sm:gap-8",children:[(0,r.jsx)(N.$,{variant:"ghost",size:"icon",className:`text-white ${e.isShuffled?"text-green-500":""}`,onClick:en,"aria-label":e.isShuffled?"Shuffle On":"Shuffle Off",children:(0,r.jsx)(u.A,{className:"h-6 w-6 sm:h-7 sm:w-7"})}),(0,r.jsx)(N.$,{variant:"ghost",size:"icon",className:"text-white",onClick:e.prev,children:(0,r.jsx)(m.A,{className:"h-8 w-8 sm:h-9 sm:w-9"})}),(0,r.jsx)(N.$,{size:"icon",variant:"secondary",className:"rounded-full h-14 w-14 sm:h-16 sm:w-16 bg-white text-black hover:bg-zinc-200 text-3xl sm:text-4xl",onClick:()=>e.isPlaying?e.pause():e.resume(),children:e.isPlaying?(0,r.jsx)(h.A,{className:"h-8 w-8 sm:h-10 sm:w-10"}):(0,r.jsx)(f.A,{className:"h-8 w-8 sm:h-10 sm:w-10"})}),(0,r.jsx)(N.$,{variant:"ghost",size:"icon",className:"text-white",onClick:e.next,children:(0,r.jsx)(p.A,{className:"h-8 w-8 sm:h-9 sm:w-9"})}),(0,r.jsx)(N.$,{variant:"ghost",size:"icon",className:`text-white relative ${"none"!==e.loopMode?"text-green-500":""}`,onClick:eo,"aria-label":`Loop ${"none"===e.loopMode?"off":"one"===e.loopMode?"one track":"all tracks"}`,title:`Loop ${"none"===e.loopMode?"off":"one"===e.loopMode?"one track":"all tracks"}`,children:"one"===e.loopMode?(0,r.jsx)(x.A,{className:"h-6 w-6 sm:h-7 sm:w-7"}):(0,r.jsx)(v.A,{className:"h-6 w-6 sm:h-7 sm:w-7"})})]}),(0,r.jsxs)("div",{className:"flex items-center gap-4 w-full max-w-2xl px-4",children:[(0,r.jsx)("span",{className:"text-sm sm:text-base text-zinc-200 w-12 sm:w-14 text-right",children:el(er)}),(0,r.jsx)(j,{value:[es?Math.min(er,es):0],max:es||0,step:1,onValueChange:t=>e.seek(t[0]),className:"cursor-pointer flex-1"}),(0,r.jsx)("span",{className:"text-sm sm:text-base text-zinc-200 w-12 sm:w-14",children:el(es||0)})]})]})]}),(0,r.jsxs)("div",{className:"fixed bottom-0 left-0 right-0 bg-zinc-900 border-t border-zinc-800 px-3 sm:px-4 py-2 sm:py-3 z-50",children:[E&&(0,r.jsxs)("div",{className:"fixed left-1/2 -translate-x-1/2 bottom-20 sm:bottom-24 w-[min(95vw,600px)] rounded-xl border border-zinc-800 bg-zinc-900/80 backdrop-blur-md shadow-lg z-50",children:[(0,r.jsxs)("div",{className:"px-3 sm:px-4 py-2 border-b border-zinc-800 flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"text-xs sm:text-sm text-zinc-400",children:["Lyrics ",_?"(Synced)":"(Static)"," - Click the mic button to toggle"]}),(0,r.jsx)(N.$,{size:"sm",variant:"ghost",className:"text-zinc-400",onClick:()=>z(!1),children:"Close"})]}),(0,r.jsx)("div",{ref:L,className:"max-h-48 sm:max-h-56 overflow-auto px-3 sm:px-4 py-3 whitespace-pre-wrap break-words",children:I?_&&ec.length?(0,r.jsx)("div",{children:ec.map((e,t)=>(0,r.jsx)("div",{ref:e=>{D.current[t]=e},className:t===U?"text-white font-semibold text-sm sm:text-base transition-colors":"text-zinc-400 text-xs sm:text-sm",children:e.text},`${e.time}-${t}`))}):(0,r.jsx)("div",{className:"space-y-1",children:ed.map((e,t)=>"header"===e.kind?(0,r.jsxs)("div",{className:"pt-2 text-zinc-200 font-semibold text-sm sm:text-base",children:["[",e.text,"]"]},`h-${t}`):(0,r.jsx)("div",{className:"text-xs sm:text-sm text-zinc-300 break-words",children:e.text||"\xa0"},`l-${t}`))}):(0,r.jsxs)("div",{className:"text-xs sm:text-sm text-zinc-500 text-center py-4",children:[(0,r.jsx)("p",{children:"No lyrics available for this track."}),(0,r.jsx)("p",{className:"text-xs text-zinc-600 mt-1",children:"Try searching for a different song or check back later."})]})})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between max-w-screen-2xl mx-auto",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 sm:gap-4 w-1/3 sm:w-1/4",children:[et?(0,r.jsx)(i.default,{src:et,alt:ee.length<=13?ee:ee.slice(0,13)+"...",width:t?40:56,height:t?40:56,className:"rounded"}):(0,r.jsx)("div",{className:`${t?"h-10 w-10":"h-14 w-14"} rounded bg-zinc-800 flex items-center justify-center ${t?"text-lg":"text-2xl"}`,children:"\uD83C\uDFB5"}),(0,r.jsxs)("div",{className:"hidden sm:block min-w-0",children:[(0,r.jsx)("p",{className:"font-medium text-sm truncate max-w-[24ch]",title:ee,children:ee||"Nothing playing"}),(0,r.jsx)(A.d,{artists:K?.artists,artistIds:K?.artist_ids,maxLength:24,className:"text-xs text-zinc-400 truncate max-w-[28ch] block",hideWhenEmpty:!0,showLinks:!0})]}),(0,r.jsx)(N.$,{variant:"ghost",size:"icon",className:`text-zinc-400 hover:text-white ${ea?"text-red-500":""} ${t?"h-8 w-8":"h-9 w-9"}`,onClick:ei,children:(0,r.jsx)(n.A,{className:"h-4 w-4"})})]}),(0,r.jsxs)("div",{className:"flex flex-col items-center gap-1 sm:gap-2 w-1/3 sm:w-2/4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 sm:gap-4",children:[(0,r.jsx)(N.$,{variant:"ghost",size:"icon",className:`text-zinc-400 hover:text-white ${e.isShuffled?"text-green-500":""} ${t?"h-8 w-8":"h-9 w-9"}`,onClick:en,"aria-label":e.isShuffled?"Shuffle On":"Shuffle Off",children:(0,r.jsx)(u.A,{className:`${t?"h-3 w-3":"h-4 w-4"}`})}),(0,r.jsx)(N.$,{variant:"ghost",size:"icon",className:`text-zinc-400 hover:text-white ${t?"h-8 w-8":"h-9 w-9"}`,onClick:e.prev,children:(0,r.jsx)(m.A,{className:`${t?"h-4 w-4":"h-5 w-5"}`})}),(0,r.jsx)(N.$,{size:"icon",variant:"secondary",className:`rounded-full bg-white text-black hover:bg-zinc-200 ${t?"h-10 w-10":"h-12 w-12"}`,onClick:()=>e.isPlaying?e.pause():e.resume(),children:e.isPlaying?(0,r.jsx)(h.A,{className:`${t?"h-4 w-4":"h-5 w-5"}`}):(0,r.jsx)(f.A,{className:`${t?"h-4 w-4":"h-5 w-5"} ml-0.5`})}),(0,r.jsx)(N.$,{variant:"ghost",size:"icon",className:`text-zinc-400 hover:text-white ${t?"h-8 w-8":"h-9 w-9"}`,onClick:e.next,children:(0,r.jsx)(p.A,{className:`${t?"h-4 w-4":"h-5 w-5"}`})}),(0,r.jsx)(N.$,{variant:"ghost",size:"icon",className:`text-zinc-400 hover:text-white relative ${"none"!==e.loopMode?"text-green-500":""} ${t?"h-8 w-8":"h-9 w-9"}`,onClick:eo,"aria-label":`Loop ${"none"===e.loopMode?"off":"one"===e.loopMode?"one track":"all tracks"}`,title:`Loop ${"none"===e.loopMode?"off":"one"===e.loopMode?"one track":"all tracks"}`,children:"one"===e.loopMode?(0,r.jsx)(x.A,{className:`${t?"h-3 w-3":"h-4 w-4"}`}):(0,r.jsx)(v.A,{className:`${t?"h-3 w-3":"h-4 w-4"}`})})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2 w-full max-w-md px-2",children:[(0,r.jsx)("span",{className:"text-xs text-zinc-400 w-8 sm:w-10 text-right",children:el(er)}),(0,r.jsx)(j,{value:[es?Math.min(er,es):0],max:es||0,step:1,onValueChange:t=>e.seek(t[0]),className:"cursor-pointer"}),(0,r.jsx)("span",{className:"text-xs text-zinc-400 w-8 sm:w-10",children:el(es||0)})]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-end gap-2 sm:gap-3 w-1/3 sm:w-1/4",children:[(0,r.jsxs)(N.$,{variant:"ghost",size:"icon",className:`text-zinc-400 hover:text-white ${t?"h-8 w-8":"h-9 w-9"}`,onClick:()=>z(e=>!e),children:[(0,r.jsx)(o.A,{className:`${t?"h-3 w-3":"h-4 w-4"}`}),I&&(0,r.jsx)("div",{className:"absolute -top-1 -right-1 w-2 h-2 bg-green-500 rounded-full"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2 w-20 sm:w-28 hidden sm:flex",children:[(0,r.jsx)(N.$,{variant:"ghost",size:"icon",className:"h-6 w-6 text-zinc-400 hover:text-white",onClick:()=>{w?($(!1),e.setVolume(T/100),y(T)):(M(s),$(!0),e.setVolume(0))},"aria-label":w?"Unmute":"Mute",children:w?(0,r.jsx)(g.A,{className:"h-4 w-4"}):(0,r.jsx)(b.A,{className:"h-4 w-4"})}),(0,r.jsx)(j,{value:[s],max:100,step:1,onValueChange:t=>{y(t[0]),w||e.setVolume(t[0]/100)},className:"cursor-pointer"})]}),(0,r.jsx)(N.$,{variant:"ghost",size:"icon",className:`text-zinc-400 hover:text-white hidden lg:flex ${t?"h-8 w-8":"h-9 w-9"}`,onClick:eu,children:(0,r.jsx)(l.A,{className:`${t?"h-3 w-3":"h-4 w-4"}`})})]})]})]})]})}},92524:(e,t,s)=>{"use strict";s.d(t,{MusicPlayer:()=>r});let r=(0,s(12907).registerClientReference)(function(){throw Error("Attempted to call MusicPlayer() from the server but MusicPlayer is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"F:\\Music-Project\\group\\music-streaming_NOW_2\\components\\music-player.tsx","MusicPlayer")},92892:(e,t,s)=>{"use strict";s.d(t,{ThemeProvider:()=>i});var r=s(60687);s(43210);var a=s(10218);function i({children:e,...t}){return(0,r.jsx)(a.N,{...t,children:e})}},93385:(e,t,s)=>{"use strict";s.d(t,{firebaseService:()=>l});var r=s(75535),a=s(80043);async function i(e){return new Promise(t=>setTimeout(t,e))}async function n(e,t,s=3,r=500){let a,o=0;for(;o<=s;)try{o>0&&console.debug(`[Firestore][retry] Attempt ${o}/${s} for`,t);let r=await e();return o>0&&console.debug(`[Firestore][retry] Succeeded after ${o} retries for`,t),r}catch(l){a=l;let e=l?.code;if("unavailable"!==e&&"deadline-exceeded"!==e&&"internal"!==e&&"resource-exhausted"!==e||o===s)throw console.error(`[Firestore][retry] Failed ${t}`,{attempt:o,code:e,err:l}),l;let n=r*Math.pow(2,o);await i(n),o++}throw a}class o{initConnectivityHandling(){}async createUserProfile(e){let t=(0,r.H9)(a.db,"users",e.uid),s=Object.fromEntries(Object.entries(e).filter(([e,t])=>null!=t));await (0,r.BN)(t,{...s,createdAt:(0,r.O5)(),updatedAt:(0,r.O5)()})}async getUserProfile(e){let t=(0,r.H9)(a.db,"users",e),s=await n(()=>(0,r.x7)(t),`getUserProfile(${e})`);if(s.exists()){let e=s.data();return{...e,createdAt:e.createdAt?.toDate()||new Date,updatedAt:e.updatedAt?.toDate()||new Date}}return null}async updateUserProfile(e,t){let s=(0,r.H9)(a.db,"users",e);await (0,r.mZ)(s,{...t,updatedAt:(0,r.O5)()})}async updateContentPreferences(e,t){let s=(0,r.H9)(a.db,"users",e);await (0,r.mZ)(s,{contentPreferences:t,updatedAt:(0,r.O5)()})}async getUserContentPreferences(e){let t=await this.getUserProfile(e);return t?.contentPreferences||null}async createPlaylist(e){let t=Object.fromEntries(Object.entries(e).filter(([e,t])=>void 0!==t));return(await (0,r.gS)((0,r.rJ)(a.db,"users",e.createdBy,"playlists"),{...t,createdAt:(0,r.O5)(),updatedAt:(0,r.O5)()})).id}async getPlaylist(e){let t=(0,r.rJ)(a.db,"users");for(let s of(await n(()=>(0,r.GG)(t),"getPlaylist:users")).docs){let t=(0,r.rJ)(a.db,"users",s.id,"playlists"),i=(0,r.P)(t,(0,r._M)("__name__","==",e)),o=await n(()=>(0,r.GG)(i),`getPlaylist:${e}`);if(!o.empty){let e=o.docs[0].data();return{id:o.docs[0].id,...e,createdAt:e.createdAt?.toDate()||new Date,updatedAt:e.updatedAt?.toDate()||new Date}}}return null}async getUserPlaylists(e){let t=(0,r.rJ)(a.db,"users",e,"playlists"),s=(0,r.P)(t,(0,r.My)("updatedAt","desc"));return(await n(()=>(0,r.GG)(s),`getUserPlaylists(${e})`)).docs.map(e=>{let t=e.data();return{id:e.id,...t,createdAt:t.createdAt?.toDate()||new Date,updatedAt:t.updatedAt?.toDate()||new Date}})}async updatePlaylist(e,t){if(!await this.getPlaylist(e))throw Error("Playlist not found");let s=(0,r.rJ)(a.db,"users");for(let i of(await n(()=>(0,r.GG)(s),"updatePlaylist:users")).docs){let s=(0,r.H9)(a.db,"users",i.id,"playlists",e);if((await n(()=>(0,r.x7)(s),"updatePlaylist:locate")).exists()){await (0,r.mZ)(s,{...t,updatedAt:(0,r.O5)()});return}}throw Error("Playlist not found")}async deletePlaylist(e){let t=(0,r.rJ)(a.db,"users");for(let s of(await n(()=>(0,r.GG)(t),"deletePlaylist:users")).docs){let t=(0,r.H9)(a.db,"users",s.id,"playlists",e);if((await n(()=>(0,r.x7)(t),"deletePlaylist:locate")).exists()){await (0,r.kd)(t);return}}throw Error("Playlist not found")}async addTrackToPlaylist(e,t){let s=(0,r.rJ)(a.db,"users");for(let i of(await n(()=>(0,r.GG)(s),"addTrackToPlaylist:users")).docs){let s=(0,r.H9)(a.db,"users",i.id,"playlists",e),o=await n(()=>(0,r.x7)(s),"addTrackToPlaylist:locate");if(o.exists()){let e=[...o.data().tracks,t];await (0,r.mZ)(s,{tracks:e,trackCount:e.length,updatedAt:(0,r.O5)()});return}}throw Error("Playlist not found")}async removeTrackFromPlaylist(e,t){let s=(0,r.rJ)(a.db,"users");for(let i of(await n(()=>(0,r.GG)(s),"removeTrackFromPlaylist:users")).docs){let s=(0,r.H9)(a.db,"users",i.id,"playlists",e),o=await n(()=>(0,r.x7)(s),"removeTrackFromPlaylist:locate");if(o.exists()){let e=o.data().tracks.filter(e=>e!==t);await (0,r.mZ)(s,{tracks:e,trackCount:e.length,updatedAt:(0,r.O5)()});return}}throw Error("Playlist not found")}async addToFavorites(e,t){let s=(0,r.rJ)(a.db,"users",e,"favorites");await (0,r.gS)(s,{trackId:t,addedAt:(0,r.O5)()})}async removeFromFavorites(e,t){let s=(0,r.rJ)(a.db,"users",e,"favorites"),i=(0,r.P)(s,(0,r._M)("trackId","==",t)),o=await n(()=>(0,r.GG)(i),`removeFromFavorites(${e}, ${t})`),l=(0,r.wP)(a.db);o.docs.forEach(e=>{l.delete(e.ref)}),await l.commit()}async getUserFavorites(e){let t=(0,r.rJ)(a.db,"users",e,"favorites"),s=(0,r.P)(t,(0,r.My)("addedAt","desc"));return(await n(()=>(0,r.GG)(s),`getUserFavorites(${e})`)).docs.map(e=>e.data().trackId)}async isTrackFavorited(e,t){let s=(0,r.rJ)(a.db,"users",e,"favorites"),i=(0,r.P)(s,(0,r._M)("trackId","==",t));return!(await n(()=>(0,r.GG)(i),`isTrackFavorited(${e}, ${t})`)).empty}async addToHistory(e,t){let s=(0,r.rJ)(a.db,"users",e,"history");await (0,r.gS)(s,{trackId:t,playedAt:(0,r.O5)()});let i=(0,r.P)(s,(0,r.My)("playedAt","desc")),n=await (0,r.GG)(i);if(n.docs.length>50){let t=(0,r.wP)(a.db),s=n.docs.slice(50);s.forEach(e=>{t.delete(e.ref)}),await t.commit(),console.debug(`[FirebaseService] Cleaned up ${s.length} old history entries for user ${e}`)}}async getUserHistory(e,t=50){let s=(0,r.rJ)(a.db,"users",e,"history"),i=(0,r.P)(s,(0,r.My)("playedAt","desc"),(0,r.AB)(t));return(await n(()=>(0,r.GG)(i),`getUserHistory(${e})`)).docs.map(e=>e.data().trackId)}async addToLibrary(e,t,s){let i=(0,r.rJ)(a.db,"users",e,"library");await (0,r.gS)(i,{type:t,itemId:s,addedAt:(0,r.O5)()})}async removeFromLibrary(e,t,s){let i=(0,r.rJ)(a.db,"users",e,"library"),o=(0,r.P)(i,(0,r._M)("type","==",t),(0,r._M)("itemId","==",s)),l=await n(()=>(0,r.GG)(o),`removeFromLibrary(${e}, ${t}, ${s})`),c=(0,r.wP)(a.db);l.docs.forEach(e=>c.delete(e.ref)),await c.commit()}async getUserLibrary(e,t){let s;let i=(0,r.rJ)(a.db,"users",e,"library");s=t?(0,r.P)(i,(0,r._M)("type","==",t)):(0,r.P)(i,(0,r.My)("addedAt","desc"));let o=(await n(()=>(0,r.GG)(s),`getUserLibrary(${e}, ${t||"all"})`)).docs.map(e=>{let t=e.data();return{id:e.id,...t,addedAt:t.addedAt?.toDate()||new Date}});return t&&o.sort((e,t)=>t.addedAt.getTime()-e.addedAt.getTime()),o}async deleteUserAccount(e){let t=(0,r.wP)(a.db);try{console.log(`[FirebaseService] Starting complete account deletion for user: ${e}`);let s=(0,r.H9)(a.db,"users",e);t.delete(s);let i=(0,r.rJ)(a.db,"users",e,"playlists");(await n(()=>(0,r.GG)(i),`deleteUserAccount:playlists(${e})`)).docs.forEach(e=>{t.delete(e.ref)});let o=(0,r.rJ)(a.db,"users",e,"favorites");(await n(()=>(0,r.GG)(o),`deleteUserAccount:favorites(${e})`)).docs.forEach(e=>{t.delete(e.ref)});let l=(0,r.rJ)(a.db,"users",e,"history");(await n(()=>(0,r.GG)(l),`deleteUserAccount:history(${e})`)).docs.forEach(e=>{t.delete(e.ref)});let c=(0,r.rJ)(a.db,"users",e,"library");(await n(()=>(0,r.GG)(c),`deleteUserAccount:library(${e})`)).docs.forEach(e=>{t.delete(e.ref)}),await t.commit(),console.log(`[FirebaseService] Successfully deleted all Firestore data for user: ${e}`)}catch(t){throw console.error(`[FirebaseService] Error deleting user account data for ${e}:`,t),Error(`Failed to delete user account data: ${t}`)}}}let l=new o},93995:(e,t,s)=>{Promise.resolve().then(s.bind(s,17968)),Promise.resolve().then(s.bind(s,12603)),Promise.resolve().then(s.bind(s,92524)),Promise.resolve().then(s.bind(s,83066)),Promise.resolve().then(s.bind(s,52358)),Promise.resolve().then(s.bind(s,82981)),Promise.resolve().then(s.bind(s,70940))},95473:(e,t,s)=>{"use strict";function r(){return null}s.d(t,{FirebaseNetwork:()=>r})},96241:(e,t,s)=>{"use strict";s.d(t,{cn:()=>i});var r=s(49384),a=s(82348);function i(...e){return(0,a.QP)((0,r.$)(e))}},97380:(e,t,s)=>{"use strict";s.d(t,{v:()=>o});var r=s(60687),a=s(67760),i=s(25334),n=s(24934);function o({variant:e="default",size:t="default",className:s="",showIcon:o=!0,showText:l=!0}){return(0,r.jsxs)(n.$,{variant:e,size:t,className:`bg-gradient-to-r from-pink-500 to-red-500 hover:from-pink-600 hover:to-red-600 text-white border-0 ${s}`,onClick:()=>{window.open("https://www.paypal.com/paypalme/neonflix","_blank","noopener,noreferrer")},children:[o&&(0,r.jsx)(a.A,{className:"h-4 w-4 mr-2"}),l&&"Support Us",(0,r.jsx)(i.A,{className:"h-3 w-3 ml-1"})]})}}};